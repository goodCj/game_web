{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { renderToBody } from './render-to-body';\nexport function renderImperatively(element) {\n  var Wrapper = React.forwardRef(function (_, ref) {\n    var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n    var closedRef = useRef(false);\n    var _useState3 = useState(element),\n      _useState4 = _slicedToArray(_useState3, 2),\n      elementToRender = _useState4[0],\n      setElementToRender = _useState4[1];\n    var keyRef = useRef(0);\n    useEffect(function () {\n      if (!closedRef.current) {\n        setVisible(true);\n      } else {\n        afterClose();\n      }\n    }, []);\n    function onClose() {\n      var _a, _b;\n      closedRef.current = true;\n      setVisible(false);\n      (_b = (_a = elementToRender.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    function afterClose() {\n      var _a, _b;\n      unmount();\n      (_b = (_a = elementToRender.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    useImperativeHandle(ref, function () {\n      return {\n        close: onClose,\n        replace: function replace(element) {\n          var _a, _b;\n          keyRef.current++;\n          (_b = (_a = elementToRender.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n          setElementToRender(element);\n        }\n      };\n    });\n    return React.cloneElement(elementToRender, Object.assign(Object.assign({}, elementToRender.props), {\n      key: keyRef.current,\n      visible: visible,\n      onClose: onClose,\n      afterClose: afterClose\n    }));\n  });\n  var wrapperRef = React.createRef();\n  var unmount = renderToBody(React.createElement(Wrapper, {\n    ref: wrapperRef\n  }));\n  return {\n    close: function close() {\n      var _a;\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.close();\n    },\n    replace: function replace(element) {\n      var _a;\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.replace(element);\n    }\n  };\n}","map":{"version":3,"names":["React","useEffect","useImperativeHandle","useRef","useState","renderToBody","renderImperatively","element","Wrapper","forwardRef","_","ref","_useState","_useState2","_slicedToArray","visible","setVisible","closedRef","_useState3","_useState4","elementToRender","setElementToRender","keyRef","current","afterClose","onClose","_a","_b","props","call","unmount","close","replace","cloneElement","Object","assign","key","wrapperRef","createRef","createElement"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/utils/render-imperatively.js"],"sourcesContent":["import React, { useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { renderToBody } from './render-to-body';\nexport function renderImperatively(element) {\n  const Wrapper = React.forwardRef((_, ref) => {\n    const [visible, setVisible] = useState(false);\n    const closedRef = useRef(false);\n    const [elementToRender, setElementToRender] = useState(element);\n    const keyRef = useRef(0);\n    useEffect(() => {\n      if (!closedRef.current) {\n        setVisible(true);\n      } else {\n        afterClose();\n      }\n    }, []);\n    function onClose() {\n      var _a, _b;\n      closedRef.current = true;\n      setVisible(false);\n      (_b = (_a = elementToRender.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    function afterClose() {\n      var _a, _b;\n      unmount();\n      (_b = (_a = elementToRender.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    useImperativeHandle(ref, () => ({\n      close: onClose,\n      replace: element => {\n        var _a, _b;\n        keyRef.current++;\n        (_b = (_a = elementToRender.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n        setElementToRender(element);\n      }\n    }));\n    return React.cloneElement(elementToRender, Object.assign(Object.assign({}, elementToRender.props), {\n      key: keyRef.current,\n      visible,\n      onClose,\n      afterClose\n    }));\n  });\n  const wrapperRef = React.createRef();\n  const unmount = renderToBody(React.createElement(Wrapper, {\n    ref: wrapperRef\n  }));\n  return {\n    close: () => {\n      var _a;\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.close();\n    },\n    replace: element => {\n      var _a;\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.replace(element);\n    }\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}