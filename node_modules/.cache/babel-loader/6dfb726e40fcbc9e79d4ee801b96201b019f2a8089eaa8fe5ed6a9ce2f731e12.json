{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { useEffect, useState } from 'react';\nimport isBrowser from '../utils/isBrowser';\nvar subscribers = new Set();\nvar info;\nvar responsiveConfig = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nfunction handleResize() {\n  var oldInfo = info;\n  calculate();\n  if (oldInfo === info) return;\n  var _iterator = _createForOfIteratorHelper(subscribers),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var subscriber = _step.value;\n      subscriber();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nvar listening = false;\nfunction calculate() {\n  var width = window.innerWidth;\n  var newInfo = {};\n  var shouldUpdate = false;\n  for (var _i = 0, _Object$keys = Object.keys(responsiveConfig); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n    newInfo[key] = width >= responsiveConfig[key];\n    if (newInfo[key] !== info[key]) {\n      shouldUpdate = true;\n    }\n  }\n  if (shouldUpdate) {\n    info = newInfo;\n  }\n}\nexport function configResponsive(config) {\n  responsiveConfig = config;\n  if (info) calculate();\n}\nexport function useResponsive() {\n  if (isBrowser && !listening) {\n    info = {};\n    calculate();\n    window.addEventListener('resize', handleResize);\n    listening = true;\n  }\n  var _useState = useState(info),\n    _useState2 = _slicedToArray(_useState, 2),\n    state = _useState2[0],\n    setState = _useState2[1];\n  useEffect(function () {\n    if (!isBrowser) return;\n    // In React 18's StrictMode, useEffect perform twice, resize listener is remove, so handleResize is never perform.\n    // https://github.com/alibaba/hooks/issues/1910\n    if (!listening) {\n      window.addEventListener('resize', handleResize);\n    }\n    var subscriber = function subscriber() {\n      setState(info);\n    };\n    subscribers.add(subscriber);\n    return function () {\n      subscribers.delete(subscriber);\n      if (subscribers.size === 0) {\n        window.removeEventListener('resize', handleResize);\n        listening = false;\n      }\n    };\n  }, []);\n  return state;\n}","map":{"version":3,"names":["useEffect","useState","isBrowser","subscribers","Set","info","responsiveConfig","xs","sm","md","lg","xl","handleResize","oldInfo","calculate","_iterator","_createForOfIteratorHelper","_step","s","n","done","subscriber","value","err","e","f","listening","width","window","innerWidth","newInfo","shouldUpdate","_i","_Object$keys","Object","keys","length","key","configResponsive","config","useResponsive","addEventListener","_useState","_useState2","_slicedToArray","state","setState","add","delete","size","removeEventListener"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/useResponsive/index.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport isBrowser from '../utils/isBrowser';\nconst subscribers = new Set();\nlet info;\nlet responsiveConfig = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nfunction handleResize() {\n  const oldInfo = info;\n  calculate();\n  if (oldInfo === info) return;\n  for (const subscriber of subscribers) {\n    subscriber();\n  }\n}\nlet listening = false;\nfunction calculate() {\n  const width = window.innerWidth;\n  const newInfo = {};\n  let shouldUpdate = false;\n  for (const key of Object.keys(responsiveConfig)) {\n    newInfo[key] = width >= responsiveConfig[key];\n    if (newInfo[key] !== info[key]) {\n      shouldUpdate = true;\n    }\n  }\n  if (shouldUpdate) {\n    info = newInfo;\n  }\n}\nexport function configResponsive(config) {\n  responsiveConfig = config;\n  if (info) calculate();\n}\nexport function useResponsive() {\n  if (isBrowser && !listening) {\n    info = {};\n    calculate();\n    window.addEventListener('resize', handleResize);\n    listening = true;\n  }\n  const [state, setState] = useState(info);\n  useEffect(() => {\n    if (!isBrowser) return;\n    // In React 18's StrictMode, useEffect perform twice, resize listener is remove, so handleResize is never perform.\n    // https://github.com/alibaba/hooks/issues/1910\n    if (!listening) {\n      window.addEventListener('resize', handleResize);\n    }\n    const subscriber = () => {\n      setState(info);\n    };\n    subscribers.add(subscriber);\n    return () => {\n      subscribers.delete(subscriber);\n      if (subscribers.size === 0) {\n        window.removeEventListener('resize', handleResize);\n        listening = false;\n      }\n    };\n  }, []);\n  return state;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}