{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { mergeProps } from '../../utils/with-default-props';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { staged } from 'staged-components';\nimport { toCSSLength } from '../../utils/to-css-length';\nimport { LazyDetector } from './lazy-detector';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nimport { ImageIcon } from './image-icon';\nimport { BrokenImageIcon } from './broken-image-icon';\nvar classPrefix = \"adm-image\";\nvar defaultProps = {\n  fit: 'fill',\n  placeholder: React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-tip\")\n  }, React.createElement(ImageIcon, null)),\n  fallback: React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-tip\")\n  }, React.createElement(BrokenImageIcon, null)),\n  lazy: false,\n  draggable: false\n};\nexport var Image = staged(function (p) {\n  var props = mergeProps(defaultProps, p);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loaded = _useState2[0],\n    setLoaded = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    failed = _useState4[0],\n    setFailed = _useState4[1];\n  var ref = useRef(null);\n  var src = props.src;\n  var srcSet = props.srcSet;\n  var _useState5 = useState(!props.lazy),\n    _useState6 = _slicedToArray(_useState5, 2),\n    initialized = _useState6[0],\n    setInitialized = _useState6[1];\n  src = initialized ? props.src : undefined;\n  srcSet = initialized ? props.srcSet : undefined;\n  useIsomorphicUpdateLayoutEffect(function () {\n    setLoaded(false);\n    setFailed(false);\n  }, [src]);\n  function renderInner() {\n    if (failed) {\n      return React.createElement(React.Fragment, null, props.fallback);\n    }\n    var img = React.createElement(\"img\", {\n      className: \"\".concat(classPrefix, \"-img\"),\n      src: src,\n      alt: props.alt,\n      onClick: props.onClick,\n      onLoad: function onLoad(e) {\n        var _a;\n        setLoaded(true);\n        (_a = props.onLoad) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      onError: function onError(e) {\n        var _a;\n        setFailed(true);\n        (_a = props.onError) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      style: {\n        objectFit: props.fit,\n        display: loaded ? 'block' : 'none'\n      },\n      crossOrigin: props.crossOrigin,\n      decoding: props.decoding,\n      loading: props.loading,\n      referrerPolicy: props.referrerPolicy,\n      sizes: props.sizes,\n      srcSet: srcSet,\n      useMap: props.useMap,\n      draggable: props.draggable\n    });\n    return React.createElement(React.Fragment, null, !loaded && props.placeholder, img);\n  }\n  var style = {};\n  if (props.width) {\n    style['--width'] = toCSSLength(props.width);\n    style['width'] = toCSSLength(props.width);\n  }\n  if (props.height) {\n    style['--height'] = toCSSLength(props.height);\n    style['height'] = toCSSLength(props.height);\n  }\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: ref,\n    className: classPrefix,\n    style: style,\n    onClick: props.onContainerClick\n  }, props.lazy && !initialized && React.createElement(LazyDetector, {\n    onActive: function onActive() {\n      setInitialized(true);\n    }\n  }), renderInner()));\n});","map":{"version":3,"names":["mergeProps","React","useState","useRef","withNativeProps","staged","toCSSLength","LazyDetector","useIsomorphicUpdateLayoutEffect","ImageIcon","BrokenImageIcon","classPrefix","defaultProps","fit","placeholder","createElement","className","concat","fallback","lazy","draggable","Image","p","props","_useState","_useState2","_slicedToArray","loaded","setLoaded","_useState3","_useState4","failed","setFailed","ref","src","srcSet","_useState5","_useState6","initialized","setInitialized","undefined","renderInner","Fragment","img","alt","onClick","onLoad","e","_a","call","onError","style","objectFit","display","crossOrigin","decoding","loading","referrerPolicy","sizes","useMap","width","height","onContainerClick","onActive"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/image/image.js"],"sourcesContent":["import { mergeProps } from '../../utils/with-default-props';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { staged } from 'staged-components';\nimport { toCSSLength } from '../../utils/to-css-length';\nimport { LazyDetector } from './lazy-detector';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nimport { ImageIcon } from './image-icon';\nimport { BrokenImageIcon } from './broken-image-icon';\nconst classPrefix = `adm-image`;\nconst defaultProps = {\n  fit: 'fill',\n  placeholder: React.createElement(\"div\", {\n    className: `${classPrefix}-tip`\n  }, React.createElement(ImageIcon, null)),\n  fallback: React.createElement(\"div\", {\n    className: `${classPrefix}-tip`\n  }, React.createElement(BrokenImageIcon, null)),\n  lazy: false,\n  draggable: false\n};\nexport const Image = staged(p => {\n  const props = mergeProps(defaultProps, p);\n  const [loaded, setLoaded] = useState(false);\n  const [failed, setFailed] = useState(false);\n  const ref = useRef(null);\n  let src = props.src;\n  let srcSet = props.srcSet;\n  const [initialized, setInitialized] = useState(!props.lazy);\n  src = initialized ? props.src : undefined;\n  srcSet = initialized ? props.srcSet : undefined;\n  useIsomorphicUpdateLayoutEffect(() => {\n    setLoaded(false);\n    setFailed(false);\n  }, [src]);\n  function renderInner() {\n    if (failed) {\n      return React.createElement(React.Fragment, null, props.fallback);\n    }\n    const img = React.createElement(\"img\", {\n      className: `${classPrefix}-img`,\n      src: src,\n      alt: props.alt,\n      onClick: props.onClick,\n      onLoad: e => {\n        var _a;\n        setLoaded(true);\n        (_a = props.onLoad) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      onError: e => {\n        var _a;\n        setFailed(true);\n        (_a = props.onError) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      style: {\n        objectFit: props.fit,\n        display: loaded ? 'block' : 'none'\n      },\n      crossOrigin: props.crossOrigin,\n      decoding: props.decoding,\n      loading: props.loading,\n      referrerPolicy: props.referrerPolicy,\n      sizes: props.sizes,\n      srcSet: srcSet,\n      useMap: props.useMap,\n      draggable: props.draggable\n    });\n    return React.createElement(React.Fragment, null, !loaded && props.placeholder, img);\n  }\n  const style = {};\n  if (props.width) {\n    style['--width'] = toCSSLength(props.width);\n    style['width'] = toCSSLength(props.width);\n  }\n  if (props.height) {\n    style['--height'] = toCSSLength(props.height);\n    style['height'] = toCSSLength(props.height);\n  }\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: ref,\n    className: classPrefix,\n    style: style,\n    onClick: props.onContainerClick\n  }, props.lazy && !initialized && React.createElement(LazyDetector, {\n    onActive: () => {\n      setInitialized(true);\n    }\n  }), renderInner()));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}