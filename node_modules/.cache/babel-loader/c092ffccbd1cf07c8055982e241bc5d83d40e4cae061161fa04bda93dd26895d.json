{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useSpring } from '@react-spring/web';\nimport { useMutationEffect } from './use-mutation-effect';\nimport { bound } from './bound';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from './use-isomorphic-update-layout-effect';\nexport var useTabListScroll = function useTabListScroll(targetRef, activeIndex) {\n  var _useSpring = useSpring(function () {\n      return {\n        scrollLeft: 0,\n        config: {\n          tension: 300,\n          clamp: true\n        }\n      };\n    }),\n    _useSpring2 = _slicedToArray(_useSpring, 2),\n    scrollLeft = _useSpring2[0].scrollLeft,\n    api = _useSpring2[1];\n  function animate() {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var container = targetRef.current;\n    if (!container) return;\n    if (activeIndex === undefined) return;\n    var activeTabWrapper = container.children.item(activeIndex);\n    var activeTab = activeTabWrapper.children.item(0);\n    var activeTabLeft = activeTab.offsetLeft;\n    var activeTabWidth = activeTab.offsetWidth;\n    var containerWidth = container.offsetWidth;\n    var containerScrollWidth = container.scrollWidth;\n    var containerScrollLeft = container.scrollLeft;\n    var maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    var nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    api.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate && !scrollLeft.isAnimating\n    });\n  }\n  useIsomorphicLayoutEffect(function () {\n    animate(true);\n  }, []);\n  useIsomorphicUpdateLayoutEffect(function () {\n    animate();\n  }, [activeIndex]);\n  useMutationEffect(function () {\n    animate(true);\n  }, targetRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n  return {\n    scrollLeft: scrollLeft,\n    animate: animate\n  };\n};","map":{"version":3,"names":["useSpring","useMutationEffect","bound","useIsomorphicLayoutEffect","useIsomorphicUpdateLayoutEffect","useTabListScroll","targetRef","activeIndex","_useSpring","scrollLeft","config","tension","clamp","_useSpring2","_slicedToArray","api","animate","immediate","arguments","length","undefined","container","current","activeTabWrapper","children","item","activeTab","activeTabLeft","offsetLeft","activeTabWidth","offsetWidth","containerWidth","containerScrollWidth","scrollWidth","containerScrollLeft","maxScrollDistance","nextScrollLeft","start","from","isAnimating","subtree","childList","characterData"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/utils/use-tab-list-scroll.js"],"sourcesContent":["import { useSpring } from '@react-spring/web';\nimport { useMutationEffect } from './use-mutation-effect';\nimport { bound } from './bound';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from './use-isomorphic-update-layout-effect';\nexport const useTabListScroll = (targetRef, activeIndex) => {\n  const [{\n    scrollLeft\n  }, api] = useSpring(() => ({\n    scrollLeft: 0,\n    config: {\n      tension: 300,\n      clamp: true\n    }\n  }));\n  function animate(immediate = false) {\n    const container = targetRef.current;\n    if (!container) return;\n    if (activeIndex === undefined) return;\n    const activeTabWrapper = container.children.item(activeIndex);\n    const activeTab = activeTabWrapper.children.item(0);\n    const activeTabLeft = activeTab.offsetLeft;\n    const activeTabWidth = activeTab.offsetWidth;\n    const containerWidth = container.offsetWidth;\n    const containerScrollWidth = container.scrollWidth;\n    const containerScrollLeft = container.scrollLeft;\n    const maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    const nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    api.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate && !scrollLeft.isAnimating\n    });\n  }\n  useIsomorphicLayoutEffect(() => {\n    animate(true);\n  }, []);\n  useIsomorphicUpdateLayoutEffect(() => {\n    animate();\n  }, [activeIndex]);\n  useMutationEffect(() => {\n    animate(true);\n  }, targetRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n  return {\n    scrollLeft,\n    animate\n  };\n};"],"mappings":";AAAA,SAASA,SAAS,QAAQ,mBAAmB;AAC7C,SAASC,iBAAiB,QAAQ,uBAAuB;AACzD,SAASC,KAAK,QAAQ,SAAS;AAC/B,SAASC,yBAAyB,QAAQ,QAAQ;AAClD,SAASC,+BAA+B,QAAQ,uCAAuC;AACvF,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,SAAS,EAAEC,WAAW,EAAK;EAC1D,IAAAC,UAAA,GAEUR,SAAS,CAAC;MAAA,OAAO;QACzBS,UAAU,EAAE,CAAC;QACbC,MAAM,EAAE;UACNC,OAAO,EAAE,GAAG;UACZC,KAAK,EAAE;QACT;MACF,CAAC;IAAA,CAAC,CAAC;IAAAC,WAAA,GAAAC,cAAA,CAAAN,UAAA;IAPDC,UAAU,GAAAI,WAAA,IAAVJ,UAAU;IACTM,GAAG,GAAAF,WAAA;EAON,SAASG,OAAOA,CAAA,EAAoB;IAAA,IAAnBC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IAChC,IAAMG,SAAS,GAAGf,SAAS,CAACgB,OAAO;IACnC,IAAI,CAACD,SAAS,EAAE;IAChB,IAAId,WAAW,KAAKa,SAAS,EAAE;IAC/B,IAAMG,gBAAgB,GAAGF,SAAS,CAACG,QAAQ,CAACC,IAAI,CAAClB,WAAW,CAAC;IAC7D,IAAMmB,SAAS,GAAGH,gBAAgB,CAACC,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC;IACnD,IAAME,aAAa,GAAGD,SAAS,CAACE,UAAU;IAC1C,IAAMC,cAAc,GAAGH,SAAS,CAACI,WAAW;IAC5C,IAAMC,cAAc,GAAGV,SAAS,CAACS,WAAW;IAC5C,IAAME,oBAAoB,GAAGX,SAAS,CAACY,WAAW;IAClD,IAAMC,mBAAmB,GAAGb,SAAS,CAACZ,UAAU;IAChD,IAAM0B,iBAAiB,GAAGH,oBAAoB,GAAGD,cAAc;IAC/D,IAAII,iBAAiB,IAAI,CAAC,EAAE;IAC5B,IAAMC,cAAc,GAAGlC,KAAK,CAACyB,aAAa,GAAG,CAACI,cAAc,GAAGF,cAAc,IAAI,CAAC,EAAE,CAAC,EAAEG,oBAAoB,GAAGD,cAAc,CAAC;IAC7HhB,GAAG,CAACsB,KAAK,CAAC;MACR5B,UAAU,EAAE2B,cAAc;MAC1BE,IAAI,EAAE;QACJ7B,UAAU,EAAEyB;MACd,CAAC;MACDjB,SAAS,EAAEA,SAAS,IAAI,CAACR,UAAU,CAAC8B;IACtC,CAAC,CAAC;EACJ;EACApC,yBAAyB,CAAC,YAAM;IAC9Ba,OAAO,CAAC,IAAI,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EACNZ,+BAA+B,CAAC,YAAM;IACpCY,OAAO,EAAE;EACX,CAAC,EAAE,CAACT,WAAW,CAAC,CAAC;EACjBN,iBAAiB,CAAC,YAAM;IACtBe,OAAO,CAAC,IAAI,CAAC;EACf,CAAC,EAAEV,SAAS,EAAE;IACZkC,OAAO,EAAE,IAAI;IACbC,SAAS,EAAE,IAAI;IACfC,aAAa,EAAE;EACjB,CAAC,CAAC;EACF,OAAO;IACLjC,UAAU,EAAVA,UAAU;IACVO,OAAO,EAAPA;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}