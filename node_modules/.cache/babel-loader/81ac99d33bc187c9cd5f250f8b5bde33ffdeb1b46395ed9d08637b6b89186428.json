{"ast":null,"code":"import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport var FormSubscribe = function FormSubscribe(props) {\n  var update = useUpdate();\n  var form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(function (namePath) {\n    return React.createElement(Watcher, {\n      key: namePath.toString(),\n      form: form,\n      namePath: namePath,\n      onChange: update\n    });\n  }));\n};\nexport var Watcher = memo(function (props) {\n  var value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(function () {\n    props.onChange();\n  }, [value]);\n  return null;\n});","map":{"version":3,"names":["React","memo","useContext","FieldContext","useWatch","useUpdate","useIsomorphicUpdateLayoutEffect","FormSubscribe","props","update","form","createElement","Fragment","children","getFieldsValue","to","map","namePath","Watcher","key","toString","onChange","value"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/form/form-subscribe.js"],"sourcesContent":["import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport const FormSubscribe = props => {\n  const update = useUpdate();\n  const form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(namePath => React.createElement(Watcher, {\n    key: namePath.toString(),\n    form: form,\n    namePath: namePath,\n    onChange: update\n  })));\n};\nexport const Watcher = memo(props => {\n  const value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(() => {\n    props.onChange();\n  }, [value]);\n  return null;\n});"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,UAAU,QAAQ,OAAO;AAC/C,SAASC,YAAY,EAAEC,QAAQ,QAAQ,eAAe;AACtD,SAASC,SAAS,QAAQ,QAAQ;AAClC,SAASC,+BAA+B,QAAQ,iDAAiD;AACjG,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAGC,KAAK,EAAI;EACpC,IAAMC,MAAM,GAAGJ,SAAS,EAAE;EAC1B,IAAMK,IAAI,GAAGR,UAAU,CAACC,YAAY,CAAC;EACrC,OAAOH,KAAK,CAACW,aAAa,CAACX,KAAK,CAACY,QAAQ,EAAE,IAAI,EAAEJ,KAAK,CAACK,QAAQ,CAACH,IAAI,CAACI,cAAc,CAACN,KAAK,CAACO,EAAE,CAAC,EAAEL,IAAI,CAAC,EAAEF,KAAK,CAACO,EAAE,CAACC,GAAG,CAAC,UAAAC,QAAQ;IAAA,OAAIjB,KAAK,CAACW,aAAa,CAACO,OAAO,EAAE;MAC1JC,GAAG,EAAEF,QAAQ,CAACG,QAAQ,EAAE;MACxBV,IAAI,EAAEA,IAAI;MACVO,QAAQ,EAAEA,QAAQ;MAClBI,QAAQ,EAAEZ;IACZ,CAAC,CAAC;EAAA,EAAC,CAAC;AACN,CAAC;AACD,OAAO,IAAMS,OAAO,GAAGjB,IAAI,CAAC,UAAAO,KAAK,EAAI;EACnC,IAAMc,KAAK,GAAGlB,QAAQ,CAACI,KAAK,CAACS,QAAQ,EAAET,KAAK,CAACE,IAAI,CAAC;EAClDJ,+BAA+B,CAAC,YAAM;IACpCE,KAAK,CAACa,QAAQ,EAAE;EAClB,CAAC,EAAE,CAACC,KAAK,CAAC,CAAC;EACX,OAAO,IAAI;AACb,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}