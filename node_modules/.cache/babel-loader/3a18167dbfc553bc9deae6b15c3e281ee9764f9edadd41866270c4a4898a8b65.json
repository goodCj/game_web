{"ast":null,"code":"import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var defaultValue = options.defaultValue,\n    _options$defaultValue = options.defaultValuePropName,\n    defaultValuePropName = _options$defaultValue === void 0 ? 'defaultValue' : _options$defaultValue,\n    _options$valuePropNam = options.valuePropName,\n    valuePropName = _options$valuePropNam === void 0 ? 'value' : _options$valuePropNam,\n    _options$trigger = options.trigger,\n    trigger = _options$trigger === void 0 ? 'onChange' : _options$trigger;\n  var value = props[valuePropName];\n  var isControlled = props.hasOwnProperty(valuePropName);\n  var initialValue = useMemo(function () {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  var stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  var update = useUpdate();\n  function setState(v) {\n    var r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      props[trigger].apply(props, [r].concat(args));\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;","map":{"version":3,"names":["useMemo","useRef","isFunction","useMemoizedFn","useUpdate","useControllableValue","props","arguments","length","undefined","options","defaultValue","_options$defaultValue","defaultValuePropName","_options$valuePropNam","valuePropName","_options$trigger","trigger","value","isControlled","hasOwnProperty","initialValue","stateRef","current","update","setState","v","r","_len","args","Array","_key","apply","concat"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/useControllableValue/index.js"],"sourcesContent":["import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue(props = {}, options = {}) {\n  const {\n    defaultValue,\n    defaultValuePropName = 'defaultValue',\n    valuePropName = 'value',\n    trigger = 'onChange'\n  } = options;\n  const value = props[valuePropName];\n  const isControlled = props.hasOwnProperty(valuePropName);\n  const initialValue = useMemo(() => {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  const stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  const update = useUpdate();\n  function setState(v, ...args) {\n    const r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      props[trigger](r, ...args);\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;"],"mappings":"AAAA,SAASA,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACvC,SAASC,UAAU,QAAQ,UAAU;AACrC,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,oBAAoBA,CAAA,EAA2B;EAAA,IAA1BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpD,IACEI,YAAY,GAIVD,OAAO,CAJTC,YAAY;IAAAC,qBAAA,GAIVF,OAAO,CAHTG,oBAAoB;IAApBA,oBAAoB,GAAAD,qBAAA,cAAG,cAAc,GAAAA,qBAAA;IAAAE,qBAAA,GAGnCJ,OAAO,CAFTK,aAAa;IAAbA,aAAa,GAAAD,qBAAA,cAAG,OAAO,GAAAA,qBAAA;IAAAE,gBAAA,GAErBN,OAAO,CADTO,OAAO;IAAPA,OAAO,GAAAD,gBAAA,cAAG,UAAU,GAAAA,gBAAA;EAEtB,IAAME,KAAK,GAAGZ,KAAK,CAACS,aAAa,CAAC;EAClC,IAAMI,YAAY,GAAGb,KAAK,CAACc,cAAc,CAACL,aAAa,CAAC;EACxD,IAAMM,YAAY,GAAGrB,OAAO,CAAC,YAAM;IACjC,IAAImB,YAAY,EAAE;MAChB,OAAOD,KAAK;IACd;IACA,IAAIZ,KAAK,CAACc,cAAc,CAACP,oBAAoB,CAAC,EAAE;MAC9C,OAAOP,KAAK,CAACO,oBAAoB,CAAC;IACpC;IACA,OAAOF,YAAY;EACrB,CAAC,EAAE,EAAE,CAAC;EACN,IAAMW,QAAQ,GAAGrB,MAAM,CAACoB,YAAY,CAAC;EACrC,IAAIF,YAAY,EAAE;IAChBG,QAAQ,CAACC,OAAO,GAAGL,KAAK;EAC1B;EACA,IAAMM,MAAM,GAAGpB,SAAS,EAAE;EAC1B,SAASqB,QAAQA,CAACC,CAAC,EAAW;IAC5B,IAAMC,CAAC,GAAGzB,UAAU,CAACwB,CAAC,CAAC,GAAGA,CAAC,CAACJ,QAAQ,CAACC,OAAO,CAAC,GAAGG,CAAC;IACjD,IAAI,CAACP,YAAY,EAAE;MACjBG,QAAQ,CAACC,OAAO,GAAGI,CAAC;MACpBH,MAAM,EAAE;IACV;IACA,IAAIlB,KAAK,CAACW,OAAO,CAAC,EAAE;MAAA,SAAAW,IAAA,GAAArB,SAAA,CAAAC,MAAA,EANEqB,IAAI,OAAAC,KAAA,CAAAF,IAAA,OAAAA,IAAA,WAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;QAAJF,IAAI,CAAAE,IAAA,QAAAxB,SAAA,CAAAwB,IAAA;MAAA;MAOxBzB,KAAK,CAACW,OAAO,CAAC,CAAAe,KAAA,CAAd1B,KAAK,GAAUqB,CAAC,EAAAM,MAAA,CAAKJ,IAAI,EAAC;IAC5B;EACF;EACA,OAAO,CAACP,QAAQ,CAACC,OAAO,EAAEpB,aAAa,CAACsB,QAAQ,CAAC,CAAC;AACpD;AACA,eAAepB,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}