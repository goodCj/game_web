{"ast":null,"code":"import { __rest } from \"tslib\";\nimport React, { forwardRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport List from '../list';\nimport RcForm from 'rc-field-form';\nimport { defaultFormContext, FormContext } from './context';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { Header } from './header';\nimport { useConfig } from '../config-provider';\nimport merge from 'lodash/merge';\nimport { FormArray } from './form-array';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\nvar classPrefix = 'adm-form';\nvar defaultProps = defaultFormContext;\nexport var Form = forwardRef(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var className = props.className,\n    style = props.style,\n    hasFeedback = props.hasFeedback,\n    children = props.children,\n    layout = props.layout,\n    footer = props.footer,\n    mode = props.mode,\n    disabled = props.disabled,\n    requiredMarkStyle = props.requiredMarkStyle,\n    formProps = __rest(props, [\"className\", \"style\", \"hasFeedback\", \"children\", \"layout\", \"footer\", \"mode\", \"disabled\", \"requiredMarkStyle\"]);\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var validateMessages = useMemo(function () {\n    return merge({}, locale.Form.defaultValidateMessages, formProps.validateMessages);\n  }, [locale.Form.defaultValidateMessages, formProps.validateMessages]);\n  var lists = [];\n  var currentHeader = null;\n  var items = [];\n  var count = 0;\n  function collect() {\n    if (items.length === 0) return;\n    count += 1;\n    lists.push(React.createElement(List, {\n      header: currentHeader,\n      key: count,\n      mode: mode\n    }, items));\n    items = [];\n  }\n  traverseReactNode(props.children, function (child) {\n    if (React.isValidElement(child)) {\n      if (child.type === Header) {\n        collect();\n        currentHeader = child.props.children;\n        return;\n      }\n      if (child.type === FormArray) {\n        collect();\n        lists.push(child);\n        return;\n      }\n    }\n    items.push(child);\n  });\n  collect();\n  return React.createElement(RcForm, Object.assign({\n    className: classNames(classPrefix, className),\n    style: style,\n    ref: ref\n  }, formProps, {\n    validateMessages: validateMessages\n  }), React.createElement(FormContext.Provider, {\n    value: {\n      name: formProps.name,\n      hasFeedback: hasFeedback,\n      layout: layout,\n      requiredMarkStyle: requiredMarkStyle,\n      disabled: disabled\n    }\n  }, lists), footer && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-footer\")\n  }, footer));\n});","map":{"version":3,"names":["__rest","React","forwardRef","useMemo","classNames","List","RcForm","defaultFormContext","FormContext","mergeProps","Header","useConfig","merge","FormArray","traverseReactNode","classPrefix","defaultProps","Form","p","ref","props","className","style","hasFeedback","children","layout","footer","mode","disabled","requiredMarkStyle","formProps","_useConfig","locale","validateMessages","defaultValidateMessages","lists","currentHeader","items","count","collect","length","push","createElement","header","key","child","isValidElement","type","Object","assign","Provider","value","name","concat"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/form/form.js"],"sourcesContent":["import { __rest } from \"tslib\";\nimport React, { forwardRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport List from '../list';\nimport RcForm from 'rc-field-form';\nimport { defaultFormContext, FormContext } from './context';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { Header } from './header';\nimport { useConfig } from '../config-provider';\nimport merge from 'lodash/merge';\nimport { FormArray } from './form-array';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\nconst classPrefix = 'adm-form';\nconst defaultProps = defaultFormContext;\nexport const Form = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const {\n      className,\n      style,\n      hasFeedback,\n      children,\n      layout,\n      footer,\n      mode,\n      disabled,\n      requiredMarkStyle\n    } = props,\n    formProps = __rest(props, [\"className\", \"style\", \"hasFeedback\", \"children\", \"layout\", \"footer\", \"mode\", \"disabled\", \"requiredMarkStyle\"]);\n  const {\n    locale\n  } = useConfig();\n  const validateMessages = useMemo(() => merge({}, locale.Form.defaultValidateMessages, formProps.validateMessages), [locale.Form.defaultValidateMessages, formProps.validateMessages]);\n  const lists = [];\n  let currentHeader = null;\n  let items = [];\n  let count = 0;\n  function collect() {\n    if (items.length === 0) return;\n    count += 1;\n    lists.push(React.createElement(List, {\n      header: currentHeader,\n      key: count,\n      mode: mode\n    }, items));\n    items = [];\n  }\n  traverseReactNode(props.children, child => {\n    if (React.isValidElement(child)) {\n      if (child.type === Header) {\n        collect();\n        currentHeader = child.props.children;\n        return;\n      }\n      if (child.type === FormArray) {\n        collect();\n        lists.push(child);\n        return;\n      }\n    }\n    items.push(child);\n  });\n  collect();\n  return React.createElement(RcForm, Object.assign({\n    className: classNames(classPrefix, className),\n    style: style,\n    ref: ref\n  }, formProps, {\n    validateMessages: validateMessages\n  }), React.createElement(FormContext.Provider, {\n    value: {\n      name: formProps.name,\n      hasFeedback,\n      layout,\n      requiredMarkStyle,\n      disabled: disabled\n    }\n  }, lists), footer && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, footer));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}