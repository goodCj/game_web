{"ast":null,"code":"import _defineProperty from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport classNames from 'classnames';\nimport { CloseCircleFill } from 'antd-mobile-icons';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nvar classPrefix = 'adm-virtual-input';\nvar defaultProps = {\n  defaultValue: ''\n};\nexport var VirtualInput = forwardRef(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var _usePropsValue = usePropsValue(props),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    value = _usePropsValue2[0],\n    setValue = _usePropsValue2[1];\n  var rootRef = useRef(null);\n  var contentRef = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasFocus = _useState2[0],\n    setHasFocus = _useState2[1];\n  function scrollToEnd() {\n    var root = rootRef.current;\n    if (!root) return;\n    if (document.activeElement !== root) {\n      return;\n    }\n    var content = contentRef.current;\n    if (!content) return;\n    content.scrollLeft = content.clientWidth;\n  }\n  useIsomorphicLayoutEffect(function () {\n    scrollToEnd();\n  }, [value]);\n  useEffect(function () {\n    if (hasFocus) {\n      scrollToEnd();\n    }\n  }, [hasFocus]);\n  useImperativeHandle(ref, function () {\n    return {\n      focus: function focus() {\n        var _a;\n        (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function blur() {\n        var _a;\n        (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    };\n  });\n  function onFocus() {\n    var _a;\n    setHasFocus(true);\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function onBlur() {\n    var _a;\n    setHasFocus(false);\n    (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  var keyboard = props.keyboard;\n  var keyboardElement = keyboard && React.cloneElement(keyboard, {\n    onInput: function onInput(v) {\n      var _a, _b;\n      setValue(value + v);\n      (_b = (_a = keyboard.props).onInput) === null || _b === void 0 ? void 0 : _b.call(_a, v);\n    },\n    onDelete: function onDelete() {\n      var _a, _b;\n      setValue(value.slice(0, -1));\n      (_b = (_a = keyboard.props).onDelete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    },\n    visible: hasFocus,\n    onClose: function onClose() {\n      var _a, _b, _c;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_c = (_b = keyboard.props).onClose) === null || _c === void 0 ? void 0 : _c.call(_b);\n    },\n    getContainer: null\n  });\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classNames(classPrefix, _defineProperty({}, \"\".concat(classPrefix, \"-disabled\"), props.disabled)),\n    tabIndex: props.disabled ? undefined : 0,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onClick: props.onClick\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-content\"),\n    ref: contentRef\n  }, value, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-caret-container\")\n  }, hasFocus && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-caret\")\n  }))), props.clearable && !!value && hasFocus && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-clear\"),\n    onClick: function onClick(e) {\n      var _a;\n      e.stopPropagation();\n      setValue('');\n      (_a = props.onClear) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseCircleFill, null)), !value && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-placeholder\")\n  }, props.placeholder), keyboardElement));\n});","map":{"version":3,"names":["React","forwardRef","useEffect","useImperativeHandle","useRef","useState","withNativeProps","mergeProps","usePropsValue","classNames","CloseCircleFill","useIsomorphicLayoutEffect","classPrefix","defaultProps","defaultValue","VirtualInput","p","ref","props","_usePropsValue","_usePropsValue2","_slicedToArray","value","setValue","rootRef","contentRef","_useState","_useState2","hasFocus","setHasFocus","scrollToEnd","root","current","document","activeElement","content","scrollLeft","clientWidth","focus","_a","blur","onFocus","call","onBlur","keyboard","keyboardElement","cloneElement","onInput","v","_b","onDelete","slice","visible","onClose","_c","getContainer","createElement","className","_defineProperty","concat","disabled","tabIndex","undefined","onClick","clearable","e","stopPropagation","onClear","placeholder"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/virtual-input/virtual-input.js"],"sourcesContent":["import React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport classNames from 'classnames';\nimport { CloseCircleFill } from 'antd-mobile-icons';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nconst classPrefix = 'adm-virtual-input';\nconst defaultProps = {\n  defaultValue: ''\n};\nexport const VirtualInput = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue(props);\n  const rootRef = useRef(null);\n  const contentRef = useRef(null);\n  const [hasFocus, setHasFocus] = useState(false);\n  function scrollToEnd() {\n    const root = rootRef.current;\n    if (!root) return;\n    if (document.activeElement !== root) {\n      return;\n    }\n    const content = contentRef.current;\n    if (!content) return;\n    content.scrollLeft = content.clientWidth;\n  }\n  useIsomorphicLayoutEffect(() => {\n    scrollToEnd();\n  }, [value]);\n  useEffect(() => {\n    if (hasFocus) {\n      scrollToEnd();\n    }\n  }, [hasFocus]);\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n  }));\n  function onFocus() {\n    var _a;\n    setHasFocus(true);\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function onBlur() {\n    var _a;\n    setHasFocus(false);\n    (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  const keyboard = props.keyboard;\n  const keyboardElement = keyboard && React.cloneElement(keyboard, {\n    onInput: v => {\n      var _a, _b;\n      setValue(value + v);\n      (_b = (_a = keyboard.props).onInput) === null || _b === void 0 ? void 0 : _b.call(_a, v);\n    },\n    onDelete: () => {\n      var _a, _b;\n      setValue(value.slice(0, -1));\n      (_b = (_a = keyboard.props).onDelete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    },\n    visible: hasFocus,\n    onClose: () => {\n      var _a, _b, _c;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_c = (_b = keyboard.props).onClose) === null || _c === void 0 ? void 0 : _c.call(_b);\n    },\n    getContainer: null\n  });\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-disabled`]: props.disabled\n    }),\n    tabIndex: props.disabled ? undefined : 0,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onClick: props.onClick\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`,\n    ref: contentRef\n  }, value, React.createElement(\"div\", {\n    className: `${classPrefix}-caret-container`\n  }, hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-caret`\n  }))), props.clearable && !!value && hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-clear`,\n    onClick: e => {\n      var _a;\n      e.stopPropagation();\n      setValue('');\n      (_a = props.onClear) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseCircleFill, null)), !value && React.createElement(\"div\", {\n    className: `${classPrefix}-placeholder`\n  }, props.placeholder), keyboardElement));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}