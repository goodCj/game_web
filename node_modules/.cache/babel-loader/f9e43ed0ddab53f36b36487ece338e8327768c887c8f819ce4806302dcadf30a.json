{"ast":null,"code":"import _defineProperty from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nvar classPrefix = \"adm-switch\";\nvar defaultProps = {\n  defaultChecked: false\n};\nexport var Switch = function Switch(p) {\n  var _classNames;\n  var props = mergeProps(defaultProps, p);\n  var disabled = props.disabled || props.loading || false;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    changing = _useState2[0],\n    setChanging = _useState2[1];\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var _usePropsValue = usePropsValue({\n      value: props.checked,\n      defaultValue: props.defaultChecked,\n      onChange: props.onChange\n    }),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    checked = _usePropsValue2[0],\n    setChecked = _usePropsValue2[1];\n  function onClick() {\n    return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var nextChecked, result;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!(disabled || props.loading || changing)) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            nextChecked = !checked;\n            if (!props.beforeChange) {\n              _context.next = 15;\n              break;\n            }\n            setChanging(true);\n            _context.prev = 5;\n            _context.next = 8;\n            return props.beforeChange(nextChecked);\n          case 8:\n            setChanging(false);\n            _context.next = 15;\n            break;\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](5);\n            setChanging(false);\n            throw _context.t0;\n          case 15:\n            result = setChecked(nextChecked);\n            if (!isPromise(result)) {\n              _context.next = 28;\n              break;\n            }\n            setChanging(true);\n            _context.prev = 18;\n            _context.next = 21;\n            return result;\n          case 21:\n            setChanging(false);\n            _context.next = 28;\n            break;\n          case 24:\n            _context.prev = 24;\n            _context.t1 = _context[\"catch\"](18);\n            setChanging(false);\n            throw _context.t1;\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[5, 11], [18, 24]]);\n    }));\n  }\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(classPrefix, \"-checked\"), checked), _defineProperty(_classNames, \"\".concat(classPrefix, \"-disabled\"), disabled || changing), _classNames)),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-checkbox\")\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-handle\")\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: \"\".concat(classPrefix, \"-spin-icon\")\n  })), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-inner\")\n  }, checked ? props.checkedText : props.uncheckedText))));\n};","map":{"version":3,"names":["__awaiter","classNames","React","useState","withNativeProps","usePropsValue","mergeProps","SpinIcon","useConfig","isPromise","classPrefix","defaultProps","defaultChecked","Switch","p","_classNames","props","disabled","loading","_useState","_useState2","_slicedToArray","changing","setChanging","_useConfig","locale","_usePropsValue","value","checked","defaultValue","onChange","_usePropsValue2","setChecked","onClick","_regeneratorRuntime","mark","_callee","nextChecked","result","wrap","_callee$","_context","prev","next","abrupt","beforeChange","t0","t1","stop","createElement","className","_defineProperty","concat","role","name","checkedText","uncheckedText"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/switch/switch.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-switch`;\nconst defaultProps = {\n  defaultChecked: false\n};\nexport const Switch = p => {\n  const props = mergeProps(defaultProps, p);\n  const disabled = props.disabled || props.loading || false;\n  const [changing, setChanging] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  const [checked, setChecked] = usePropsValue({\n    value: props.checked,\n    defaultValue: props.defaultChecked,\n    onChange: props.onChange\n  });\n  function onClick() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (disabled || props.loading || changing) {\n        return;\n      }\n      const nextChecked = !checked;\n      if (props.beforeChange) {\n        setChanging(true);\n        try {\n          yield props.beforeChange(nextChecked);\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n      const result = setChecked(nextChecked);\n      if (isPromise(result)) {\n        setChanging(true);\n        try {\n          yield result;\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n    });\n  }\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-checked`]: checked,\n      [`${classPrefix}-disabled`]: disabled || changing\n    }),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-checkbox`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-handle`\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: `${classPrefix}-spin-icon`\n  })), React.createElement(\"div\", {\n    className: `${classPrefix}-inner`\n  }, checked ? props.checkedText : props.uncheckedText))));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}