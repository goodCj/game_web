{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport classNames from 'classnames';\nimport React, { useState, useRef } from 'react';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Mask from '../mask';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { ShouldRender } from '../../utils/should-render';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from './popup-base-props';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-popup\";\nvar defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  position: 'bottom'\n});\nexport var Popup = function Popup(p) {\n  var props = mergeProps(defaultProps, p);\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var bodyCls = classNames(\"\".concat(classPrefix, \"-body\"), props.bodyClassName, \"\".concat(classPrefix, \"-body-position-\").concat(props.position));\n  var _useState = useState(props.visible),\n    _useState2 = _slicedToArray(_useState, 2),\n    active = _useState2[0],\n    setActive = _useState2[1];\n  useIsomorphicLayoutEffect(function () {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  var ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active ? 'strict' : false);\n  var unmountedRef = useUnmountedRef();\n  var _useSpring = useSpring({\n      percent: props.visible ? 0 : 100,\n      config: {\n        precision: 0.1,\n        mass: 0.4,\n        tension: 300,\n        friction: 30\n      },\n      onRest: function onRest() {\n        var _a, _b;\n        if (unmountedRef.current) return;\n        setActive(props.visible);\n        if (props.visible) {\n          (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n        } else {\n          (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n        }\n      }\n    }),\n    percent = _useSpring.percent;\n  var maskVisible = useInnerVisible(active && props.visible);\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    onClick: props.onClick,\n    style: {\n      display: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: function onMaskClick(e) {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    className: props.maskClassName,\n    style: props.maskStyle,\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(animated.div, {\n    className: bodyCls,\n    style: Object.assign(Object.assign({}, props.bodyStyle), {\n      transform: percent.to(function (v) {\n        if (props.position === 'bottom') {\n          return \"translate(0, \".concat(v, \"%)\");\n        }\n        if (props.position === 'top') {\n          return \"translate(0, -\".concat(v, \"%)\");\n        }\n        if (props.position === 'left') {\n          return \"translate(-\".concat(v, \"%, 0)\");\n        }\n        if (props.position === 'right') {\n          return \"translate(\".concat(v, \"%, 0)\");\n        }\n        return 'none';\n      })\n    }),\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames(\"\".concat(classPrefix, \"-close-icon\"), 'adm-plain-anchor'),\n    onClick: function onClick() {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    role: 'button',\n    \"aria-label\": locale.common.close\n  }, React.createElement(CloseOutline, null)), props.children))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};","map":{"version":3,"names":["classNames","React","useState","useRef","useIsomorphicLayoutEffect","useUnmountedRef","withNativeProps","mergeProps","Mask","useLockScroll","renderToContainer","useSpring","animated","withStopPropagation","ShouldRender","CloseOutline","defaultPopupBaseProps","useInnerVisible","useConfig","classPrefix","defaultProps","Object","assign","position","Popup","p","props","_useConfig","locale","bodyCls","concat","bodyClassName","_useState","visible","_useState2","_slicedToArray","active","setActive","ref","disableBodyScroll","unmountedRef","_useSpring","percent","config","precision","mass","tension","friction","onRest","_a","_b","current","afterShow","call","afterClose","maskVisible","node","stopPropagation","createElement","className","onClick","style","display","undefined","mask","forceRender","destroyOnClose","onMaskClick","e","closeOnMaskClick","onClose","maskClassName","maskStyle","div","bodyStyle","transform","to","v","showCloseButton","role","common","close","children","getContainer"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/popup/popup.js"],"sourcesContent":["import classNames from 'classnames';\nimport React, { useState, useRef } from 'react';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Mask from '../mask';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { ShouldRender } from '../../utils/should-render';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from './popup-base-props';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-popup`;\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  position: 'bottom'\n});\nexport const Popup = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    locale\n  } = useConfig();\n  const bodyCls = classNames(`${classPrefix}-body`, props.bodyClassName, `${classPrefix}-body-position-${props.position}`);\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active ? 'strict' : false);\n  const unmountedRef = useUnmountedRef();\n  const {\n    percent\n  } = useSpring({\n    percent: props.visible ? 0 : 100,\n    config: {\n      precision: 0.1,\n      mass: 0.4,\n      tension: 300,\n      friction: 30\n    },\n    onRest: () => {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const maskVisible = useInnerVisible(active && props.visible);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    onClick: props.onClick,\n    style: {\n      display: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    className: props.maskClassName,\n    style: props.maskStyle,\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(animated.div, {\n    className: bodyCls,\n    style: Object.assign(Object.assign({}, props.bodyStyle), {\n      transform: percent.to(v => {\n        if (props.position === 'bottom') {\n          return `translate(0, ${v}%)`;\n        }\n        if (props.position === 'top') {\n          return `translate(0, -${v}%)`;\n        }\n        if (props.position === 'left') {\n          return `translate(-${v}%, 0)`;\n        }\n        if (props.position === 'right') {\n          return `translate(${v}%, 0)`;\n        }\n        return 'none';\n      })\n    }),\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames(`${classPrefix}-close-icon`, 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    role: 'button',\n    \"aria-label\": locale.common.close\n  }, React.createElement(CloseOutline, null)), props.children))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}