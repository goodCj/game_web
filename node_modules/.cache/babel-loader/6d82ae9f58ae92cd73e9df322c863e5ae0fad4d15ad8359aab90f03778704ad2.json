{"ast":null,"code":"import _defineProperty from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _createForOfIteratorHelper from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport Tabs from '../tabs';\nimport CheckList from '../check-list';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useCascaderValueExtend } from './use-cascader-value-extend';\nimport { useConfig } from '../config-provider';\nimport { optionSkeleton } from './option-skeleton';\nimport Skeleton from '../skeleton';\nimport { useUpdateEffect } from 'ahooks';\nvar classPrefix = \"adm-cascader-view\";\nvar defaultProps = {\n  defaultValue: []\n};\nexport var CascaderView = function CascaderView(p) {\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var props = mergeProps(defaultProps, p);\n  var placeholder = props.placeholder || locale.Cascader.placeholder;\n  var _usePropsValue = usePropsValue(Object.assign(Object.assign({}, props), {\n      onChange: function onChange(val) {\n        var _a;\n        (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, val, generateValueExtend(val));\n      }\n    })),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    value = _usePropsValue2[0],\n    setValue = _usePropsValue2[1];\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    tabActiveIndex = _useState2[0],\n    setTabActiveIndex = _useState2[1];\n  useUpdateEffect(function () {\n    var _a;\n    (_a = props.onTabsChange) === null || _a === void 0 ? void 0 : _a.call(props, tabActiveIndex);\n  }, [tabActiveIndex]);\n  var generateValueExtend = useCascaderValueExtend(props.options);\n  var levels = useMemo(function () {\n    var ret = [];\n    var currentOptions = props.options;\n    var reachedEnd = false;\n    var _iterator = _createForOfIteratorHelper(value),\n      _step;\n    try {\n      var _loop = function _loop() {\n        var v = _step.value;\n        var target = currentOptions.find(function (option) {\n          return option.value === v;\n        });\n        ret.push({\n          selected: target,\n          options: currentOptions\n        });\n        if (!target || !target.children) {\n          reachedEnd = true;\n          return \"break\";\n        }\n        currentOptions = target.children;\n      };\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _ret = _loop();\n        if (_ret === \"break\") break;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (!reachedEnd) {\n      ret.push({\n        selected: undefined,\n        options: currentOptions\n      });\n    }\n    return ret;\n  }, [value, props.options]);\n  useEffect(function () {\n    setTabActiveIndex(levels.length - 1);\n  }, [value]);\n  useEffect(function () {\n    var max = levels.length - 1;\n    if (tabActiveIndex > max) {\n      setTabActiveIndex(max);\n    }\n  }, [tabActiveIndex, levels]);\n  var onItemSelect = function onItemSelect(selectValue, depth) {\n    var next = value.slice(0, depth);\n    if (selectValue !== undefined) {\n      next[depth] = selectValue;\n    }\n    setValue(next);\n  };\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(Tabs, {\n    activeKey: tabActiveIndex.toString(),\n    onChange: function onChange(key) {\n      var activeIndex = parseInt(key);\n      setTabActiveIndex(activeIndex);\n    },\n    stretch: false,\n    className: \"\".concat(classPrefix, \"-tabs\")\n  }, levels.map(function (level, index) {\n    var selected = level.selected;\n    return React.createElement(Tabs.Tab, {\n      key: index.toString(),\n      title: React.createElement(\"div\", {\n        className: \"\".concat(classPrefix, \"-header-title\")\n      }, selected ? selected.label : typeof placeholder === 'function' ? placeholder(index) : placeholder),\n      forceRender: true\n    }, React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-content\")\n    }, level.options === optionSkeleton ? React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-skeleton\")\n    }, React.createElement(Skeleton, {\n      className: \"\".concat(classPrefix, \"-skeleton-line-1\"),\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: \"\".concat(classPrefix, \"-skeleton-line-2\"),\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: \"\".concat(classPrefix, \"-skeleton-line-3\"),\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: \"\".concat(classPrefix, \"-skeleton-line-4\"),\n      animated: true\n    })) : React.createElement(CheckList, {\n      value: [value[index]],\n      onChange: function onChange(selectValue) {\n        return onItemSelect(selectValue[0], index);\n      },\n      activeIcon: props.activeIcon\n    }, level.options.map(function (option) {\n      var active = value[index] === option.value;\n      return React.createElement(CheckList.Item, {\n        value: option.value,\n        key: option.value,\n        disabled: option.disabled,\n        className: classNames(\"\".concat(classPrefix, \"-item\"), _defineProperty({}, \"\".concat(classPrefix, \"-item-active\"), active))\n      }, option.label);\n    }))));\n  }))));\n};","map":{"version":3,"names":["React","useState","useEffect","useMemo","classNames","Tabs","CheckList","withNativeProps","mergeProps","usePropsValue","useCascaderValueExtend","useConfig","optionSkeleton","Skeleton","useUpdateEffect","classPrefix","defaultProps","defaultValue","CascaderView","p","_useConfig","locale","props","placeholder","Cascader","_usePropsValue","Object","assign","onChange","val","_a","call","generateValueExtend","_usePropsValue2","_slicedToArray","value","setValue","_useState","_useState2","tabActiveIndex","setTabActiveIndex","onTabsChange","options","levels","ret","currentOptions","reachedEnd","_iterator","_createForOfIteratorHelper","_step","_loop","v","target","find","option","push","selected","children","s","n","done","_ret","err","e","f","undefined","length","max","onItemSelect","selectValue","depth","next","slice","createElement","className","activeKey","toString","key","activeIndex","parseInt","stretch","concat","map","level","index","Tab","title","label","forceRender","animated","activeIcon","active","Item","disabled","_defineProperty"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/cascader-view/cascader-view.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport Tabs from '../tabs';\nimport CheckList from '../check-list';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useCascaderValueExtend } from './use-cascader-value-extend';\nimport { useConfig } from '../config-provider';\nimport { optionSkeleton } from './option-skeleton';\nimport Skeleton from '../skeleton';\nimport { useUpdateEffect } from 'ahooks';\nconst classPrefix = `adm-cascader-view`;\nconst defaultProps = {\n  defaultValue: []\n};\nexport const CascaderView = p => {\n  const {\n    locale\n  } = useConfig();\n  const props = mergeProps(defaultProps, p);\n  const placeholder = props.placeholder || locale.Cascader.placeholder;\n  const [value, setValue] = usePropsValue(Object.assign(Object.assign({}, props), {\n    onChange: val => {\n      var _a;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, val, generateValueExtend(val));\n    }\n  }));\n  const [tabActiveIndex, setTabActiveIndex] = useState(0);\n  useUpdateEffect(() => {\n    var _a;\n    (_a = props.onTabsChange) === null || _a === void 0 ? void 0 : _a.call(props, tabActiveIndex);\n  }, [tabActiveIndex]);\n  const generateValueExtend = useCascaderValueExtend(props.options);\n  const levels = useMemo(() => {\n    const ret = [];\n    let currentOptions = props.options;\n    let reachedEnd = false;\n    for (const v of value) {\n      const target = currentOptions.find(option => option.value === v);\n      ret.push({\n        selected: target,\n        options: currentOptions\n      });\n      if (!target || !target.children) {\n        reachedEnd = true;\n        break;\n      }\n      currentOptions = target.children;\n    }\n    if (!reachedEnd) {\n      ret.push({\n        selected: undefined,\n        options: currentOptions\n      });\n    }\n    return ret;\n  }, [value, props.options]);\n  useEffect(() => {\n    setTabActiveIndex(levels.length - 1);\n  }, [value]);\n  useEffect(() => {\n    const max = levels.length - 1;\n    if (tabActiveIndex > max) {\n      setTabActiveIndex(max);\n    }\n  }, [tabActiveIndex, levels]);\n  const onItemSelect = (selectValue, depth) => {\n    const next = value.slice(0, depth);\n    if (selectValue !== undefined) {\n      next[depth] = selectValue;\n    }\n    setValue(next);\n  };\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(Tabs, {\n    activeKey: tabActiveIndex.toString(),\n    onChange: key => {\n      const activeIndex = parseInt(key);\n      setTabActiveIndex(activeIndex);\n    },\n    stretch: false,\n    className: `${classPrefix}-tabs`\n  }, levels.map((level, index) => {\n    const selected = level.selected;\n    return React.createElement(Tabs.Tab, {\n      key: index.toString(),\n      title: React.createElement(\"div\", {\n        className: `${classPrefix}-header-title`\n      }, selected ? selected.label : typeof placeholder === 'function' ? placeholder(index) : placeholder),\n      forceRender: true\n    }, React.createElement(\"div\", {\n      className: `${classPrefix}-content`\n    }, level.options === optionSkeleton ? React.createElement(\"div\", {\n      className: `${classPrefix}-skeleton`\n    }, React.createElement(Skeleton, {\n      className: `${classPrefix}-skeleton-line-1`,\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: `${classPrefix}-skeleton-line-2`,\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: `${classPrefix}-skeleton-line-3`,\n      animated: true\n    }), React.createElement(Skeleton, {\n      className: `${classPrefix}-skeleton-line-4`,\n      animated: true\n    })) : React.createElement(CheckList, {\n      value: [value[index]],\n      onChange: selectValue => onItemSelect(selectValue[0], index),\n      activeIcon: props.activeIcon\n    }, level.options.map(option => {\n      const active = value[index] === option.value;\n      return React.createElement(CheckList.Item, {\n        value: option.value,\n        key: option.value,\n        disabled: option.disabled,\n        className: classNames(`${classPrefix}-item`, {\n          [`${classPrefix}-item-active`]: active\n        })\n      }, option.label);\n    }))));\n  }))));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}