{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate } from '../date-picker/date-picker-utils';\nimport useRenderLabel from './useRenderLabel';\nvar thisYear = new Date().getFullYear();\nvar defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day'\n};\nexport var DatePickerView = function DatePickerView(p) {\n  var _a;\n  var props = mergeProps(defaultProps, p);\n  var renderLabel = props.renderLabel;\n  var _usePropsValue = usePropsValue({\n      value: props.value,\n      defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n    }),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    value = _usePropsValue2[0],\n    setValue = _usePropsValue2[1];\n  var mergedRenderLabel = useRenderLabel(renderLabel);\n  var pickerValue = useMemo(function () {\n    return convertDateToStringArray(value, props.precision);\n  }, [value, props.precision]);\n  var onChange = useCallback(function (val) {\n    var _a;\n    var date = convertStringArrayToDate(val, props.precision);\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: function columns(selected) {\n      return generateDatePickerColumns(selected, props.min, props.max, props.precision, mergedRenderLabel, props.filter);\n    },\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    value: pickerValue,\n    mouseWheel: props.mouseWheel,\n    onChange: onChange\n  }));\n};","map":{"version":3,"names":["React","useCallback","useMemo","PickerView","withNativeProps","mergeProps","usePropsValue","generateDatePickerColumns","convertDateToStringArray","convertStringArrayToDate","useRenderLabel","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","DatePickerView","p","_a","props","renderLabel","_usePropsValue","value","defaultValue","_usePropsValue2","_slicedToArray","setValue","mergedRenderLabel","pickerValue","onChange","val","date","call","createElement","columns","selected","filter","loading","loadingContent","mouseWheel"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/date-picker-view/date-picker-view.js"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate } from '../date-picker/date-picker-utils';\nimport useRenderLabel from './useRenderLabel';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day'\n};\nexport const DatePickerView = p => {\n  var _a;\n  const props = mergeProps(defaultProps, p);\n  const {\n    renderLabel\n  } = props;\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n  });\n  const mergedRenderLabel = useRenderLabel(renderLabel);\n  const pickerValue = useMemo(() => convertDateToStringArray(value, props.precision), [value, props.precision]);\n  const onChange = useCallback(val => {\n    var _a;\n    const date = convertStringArrayToDate(val, props.precision);\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, mergedRenderLabel, props.filter),\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    value: pickerValue,\n    mouseWheel: props.mouseWheel,\n    onChange: onChange\n  }));\n};"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AACnD,OAAOC,UAAU,MAAM,gBAAgB;AACvC,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,UAAU,QAAQ,gCAAgC;AAC3D,SAASC,aAAa,QAAQ,6BAA6B;AAC3D,SAASC,yBAAyB,EAAEC,wBAAwB,EAAEC,wBAAwB,QAAQ,kCAAkC;AAChI,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,IAAMC,QAAQ,GAAG,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE;AACzC,IAAMC,YAAY,GAAG;EACnBC,GAAG,EAAE,IAAIH,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACI,WAAW,CAACL,QAAQ,GAAG,EAAE,CAAC,CAAC;EACpDM,GAAG,EAAE,IAAIL,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACI,WAAW,CAACL,QAAQ,GAAG,EAAE,CAAC,CAAC;EACpDO,SAAS,EAAE;AACb,CAAC;AACD,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAGC,CAAC,EAAI;EACjC,IAAIC,EAAE;EACN,IAAMC,KAAK,GAAGjB,UAAU,CAACS,YAAY,EAAEM,CAAC,CAAC;EACzC,IACEG,WAAW,GACTD,KAAK,CADPC,WAAW;EAEb,IAAAC,cAAA,GAA0BlB,aAAa,CAAC;MACtCmB,KAAK,EAAEH,KAAK,CAACG,KAAK;MAClBC,YAAY,EAAE,CAACL,EAAE,GAAGC,KAAK,CAACI,YAAY,MAAM,IAAI,IAAIL,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG;IAC3E,CAAC,CAAC;IAAAM,eAAA,GAAAC,cAAA,CAAAJ,cAAA;IAHKC,KAAK,GAAAE,eAAA;IAAEE,QAAQ,GAAAF,eAAA;EAItB,IAAMG,iBAAiB,GAAGpB,cAAc,CAACa,WAAW,CAAC;EACrD,IAAMQ,WAAW,GAAG7B,OAAO,CAAC;IAAA,OAAMM,wBAAwB,CAACiB,KAAK,EAAEH,KAAK,CAACJ,SAAS,CAAC;EAAA,GAAE,CAACO,KAAK,EAAEH,KAAK,CAACJ,SAAS,CAAC,CAAC;EAC7G,IAAMc,QAAQ,GAAG/B,WAAW,CAAC,UAAAgC,GAAG,EAAI;IAClC,IAAIZ,EAAE;IACN,IAAMa,IAAI,GAAGzB,wBAAwB,CAACwB,GAAG,EAAEX,KAAK,CAACJ,SAAS,CAAC;IAC3D,IAAIgB,IAAI,EAAE;MACRL,QAAQ,CAACK,IAAI,CAAC;MACd,CAACb,EAAE,GAAGC,KAAK,CAACU,QAAQ,MAAM,IAAI,IAAIX,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACc,IAAI,CAACb,KAAK,EAAEY,IAAI,CAAC;IACjF;EACF,CAAC,EAAE,CAACZ,KAAK,CAACU,QAAQ,EAAEV,KAAK,CAACJ,SAAS,CAAC,CAAC;EACrC,OAAOd,eAAe,CAACkB,KAAK,EAAEtB,KAAK,CAACoC,aAAa,CAACjC,UAAU,EAAE;IAC5DkC,OAAO,EAAE,SAAAA,QAAAC,QAAQ;MAAA,OAAI/B,yBAAyB,CAAC+B,QAAQ,EAAEhB,KAAK,CAACP,GAAG,EAAEO,KAAK,CAACL,GAAG,EAAEK,KAAK,CAACJ,SAAS,EAAEY,iBAAiB,EAAER,KAAK,CAACiB,MAAM,CAAC;IAAA;IAChIC,OAAO,EAAElB,KAAK,CAACkB,OAAO;IACtBC,cAAc,EAAEnB,KAAK,CAACmB,cAAc;IACpChB,KAAK,EAAEM,WAAW;IAClBW,UAAU,EAAEpB,KAAK,CAACoB,UAAU;IAC5BV,QAAQ,EAAEA;EACZ,CAAC,CAAC,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}