{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _createClass from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport { useRef, useEffect } from 'react';\nexport var EventEmitter = /*#__PURE__*/_createClass(function EventEmitter() {\n  var _this = this;\n  _classCallCheck(this, EventEmitter);\n  this.subscriptions = new Set();\n  this.emit = function (val) {\n    var _iterator = _createForOfIteratorHelper(_this.subscriptions),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var subscription = _step.value;\n        subscription(val);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n  this.useSubscription = function (callback) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    var callbackRef = useRef();\n    callbackRef.current = callback;\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(function () {\n      function subscription(val) {\n        if (callbackRef.current) {\n          callbackRef.current(val);\n        }\n      }\n      _this.subscriptions.add(subscription);\n      return function () {\n        _this.subscriptions.delete(subscription);\n      };\n    }, []);\n  };\n});\nexport default function useEventEmitter() {\n  var ref = useRef();\n  if (!ref.current) {\n    ref.current = new EventEmitter();\n  }\n  return ref.current;\n}","map":{"version":3,"names":["useRef","useEffect","EventEmitter","_createClass","_this","_classCallCheck","subscriptions","Set","emit","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","subscription","value","err","e","f","useSubscription","callback","callbackRef","current","add","delete","useEventEmitter","ref"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/useEventEmitter/index.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\nexport class EventEmitter {\n  constructor() {\n    this.subscriptions = new Set();\n    this.emit = val => {\n      for (const subscription of this.subscriptions) {\n        subscription(val);\n      }\n    };\n    this.useSubscription = callback => {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      const callbackRef = useRef();\n      callbackRef.current = callback;\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useEffect(() => {\n        function subscription(val) {\n          if (callbackRef.current) {\n            callbackRef.current(val);\n          }\n        }\n        this.subscriptions.add(subscription);\n        return () => {\n          this.subscriptions.delete(subscription);\n        };\n      }, []);\n    };\n  }\n}\nexport default function useEventEmitter() {\n  const ref = useRef();\n  if (!ref.current) {\n    ref.current = new EventEmitter();\n  }\n  return ref.current;\n}"],"mappings":";;;AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,WAAaC,YAAY,gBAAAC,YAAA,CACvB,SAAAD,aAAA,EAAc;EAAA,IAAAE,KAAA;EAAAC,eAAA,OAAAH,YAAA;EACZ,IAAI,CAACI,aAAa,GAAG,IAAIC,GAAG,EAAE;EAC9B,IAAI,CAACC,IAAI,GAAG,UAAAC,GAAG,EAAI;IAAA,IAAAC,SAAA,GAAAC,0BAAA,CACUP,KAAI,CAACE,aAAa;MAAAM,KAAA;IAAA;MAA7C,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAA+C;QAAA,IAApCC,YAAY,GAAAJ,KAAA,CAAAK,KAAA;QACrBD,YAAY,CAACP,GAAG,CAAC;MACnB;IAAC,SAAAS,GAAA;MAAAR,SAAA,CAAAS,CAAA,CAAAD,GAAA;IAAA;MAAAR,SAAA,CAAAU,CAAA;IAAA;EACH,CAAC;EACD,IAAI,CAACC,eAAe,GAAG,UAAAC,QAAQ,EAAI;IACjC;IACA,IAAMC,WAAW,GAAGvB,MAAM,EAAE;IAC5BuB,WAAW,CAACC,OAAO,GAAGF,QAAQ;IAC9B;IACArB,SAAS,CAAC,YAAM;MACd,SAASe,YAAYA,CAACP,GAAG,EAAE;QACzB,IAAIc,WAAW,CAACC,OAAO,EAAE;UACvBD,WAAW,CAACC,OAAO,CAACf,GAAG,CAAC;QAC1B;MACF;MACAL,KAAI,CAACE,aAAa,CAACmB,GAAG,CAACT,YAAY,CAAC;MACpC,OAAO,YAAM;QACXZ,KAAI,CAACE,aAAa,CAACoB,MAAM,CAACV,YAAY,CAAC;MACzC,CAAC;IACH,CAAC,EAAE,EAAE,CAAC;EACR,CAAC;AACH,CAAC;AAEH,eAAe,SAASW,eAAeA,CAAA,EAAG;EACxC,IAAMC,GAAG,GAAG5B,MAAM,EAAE;EACpB,IAAI,CAAC4B,GAAG,CAACJ,OAAO,EAAE;IAChBI,GAAG,CAACJ,OAAO,GAAG,IAAItB,YAAY,EAAE;EAClC;EACA,OAAO0B,GAAG,CAACJ,OAAO;AACpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}