{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nvar classPrefix = \"adm-scroll-mask\";\nexport var ScrollMask = function ScrollMask(props) {\n  var maskRef = useRef(null);\n  var _useSpring = useSpring(function () {\n      return {\n        leftMaskOpacity: 0,\n        rightMaskOpacity: 0,\n        config: {\n          clamp: true\n        }\n      };\n    }),\n    _useSpring2 = _slicedToArray(_useSpring, 2),\n    _useSpring2$ = _useSpring2[0],\n    leftMaskOpacity = _useSpring2$.leftMaskOpacity,\n    rightMaskOpacity = _useSpring2$.rightMaskOpacity,\n    api = _useSpring2[1];\n  var _useThrottleFn = useThrottleFn(function () {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var mask = maskRef.current;\n      if (!mask) return;\n      var scrollEl = props.scrollTrackRef.current;\n      if (!scrollEl) return;\n      var scrollLeft = scrollEl.scrollLeft;\n      var showLeftMask = scrollLeft > 0;\n      var showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n      api.start({\n        leftMaskOpacity: showLeftMask ? 1 : 0,\n        rightMaskOpacity: showRightMask ? 1 : 0,\n        immediate: immediate\n      });\n    }, {\n      wait: 100,\n      trailing: true,\n      leading: true\n    }),\n    updateMask = _useThrottleFn.run;\n  useEffect(function () {\n    updateMask(true);\n  }, []);\n  useEffect(function () {\n    var scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return function () {\n      return scrollEl.removeEventListener('scroll', updateMask);\n    };\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, \"\".concat(classPrefix, \"-left\")),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, \"\".concat(classPrefix, \"-right\")),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};","map":{"version":3,"names":["React","useRef","useEffect","classNames","animated","useSpring","useThrottleFn","classPrefix","ScrollMask","props","maskRef","_useSpring","leftMaskOpacity","rightMaskOpacity","config","clamp","_useSpring2","_slicedToArray","_useSpring2$","api","_useThrottleFn","immediate","arguments","length","undefined","mask","current","scrollEl","scrollTrackRef","scrollLeft","showLeftMask","showRightMask","offsetWidth","scrollWidth","start","wait","trailing","leading","updateMask","run","addEventListener","removeEventListener","createElement","Fragment","div","ref","className","concat","style","opacity"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/scroll-mask/scroll-mask.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nconst classPrefix = `adm-scroll-mask`;\nexport const ScrollMask = props => {\n  const maskRef = useRef(null);\n  const [{\n    leftMaskOpacity,\n    rightMaskOpacity\n  }, api] = useSpring(() => ({\n    leftMaskOpacity: 0,\n    rightMaskOpacity: 0,\n    config: {\n      clamp: true\n    }\n  }));\n  const {\n    run: updateMask\n  } = useThrottleFn((immediate = false) => {\n    const mask = maskRef.current;\n    if (!mask) return;\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    const scrollLeft = scrollEl.scrollLeft;\n    const showLeftMask = scrollLeft > 0;\n    const showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n    api.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  });\n  useEffect(() => {\n    updateMask(true);\n  }, []);\n  useEffect(() => {\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return () => scrollEl.removeEventListener('scroll', updateMask);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, `${classPrefix}-left`),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, `${classPrefix}-right`),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}