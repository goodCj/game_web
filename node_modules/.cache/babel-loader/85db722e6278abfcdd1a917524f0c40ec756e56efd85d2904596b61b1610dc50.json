{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useCallback, useMemo } from 'react';\nimport { useMemoizedFn } from 'ahooks';\nimport Picker from '../picker';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { convertDateToStringArray, convertStringArrayToDate, generateDatePickerColumns } from './date-picker-utils';\nimport { bound } from '../../utils/bound';\nimport useRenderLabel from '../date-picker-view/useRenderLabel';\nimport { TILL_NOW } from './util';\nvar thisYear = new Date().getFullYear();\nvar defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  defaultValue: null\n};\nexport var DatePicker = forwardRef(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var renderLabel = props.renderLabel;\n  var _usePropsValue = usePropsValue({\n      value: props.value,\n      defaultValue: props.defaultValue,\n      onChange: function onChange(v) {\n        var _a;\n        if (v === null) return;\n        (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, v);\n      }\n    }),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    value = _usePropsValue2[0],\n    setValue = _usePropsValue2[1];\n  var now = useMemo(function () {\n    return new Date();\n  }, []);\n  var mergedRenderLabel = useRenderLabel(renderLabel);\n  var pickerValue = useMemo(function () {\n    var date = value !== null && value !== void 0 ? value : now;\n    if (date.tillNow) {\n      return [TILL_NOW];\n    }\n    date = new Date(bound(date.getTime(), props.min.getTime(), props.max.getTime()));\n    return convertDateToStringArray(date, props.precision);\n  }, [value, props.precision, props.min, props.max]);\n  var onConfirm = useCallback(function (val) {\n    var date = convertStringArrayToDate(val, props.precision);\n    setValue(date, true);\n  }, [setValue, props.precision]);\n  var onSelect = useMemoizedFn(function (val) {\n    var _a;\n    var date = convertStringArrayToDate(val, props.precision);\n    (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n  });\n  var columns = useCallback(function (selected) {\n    return generateDatePickerColumns(selected, props.min, props.max, props.precision, mergedRenderLabel, props.filter, props.tillNow);\n  }, [props.min, props.max, props.precision, mergedRenderLabel, props.tillNow]);\n  return withNativeProps(props, React.createElement(Picker, {\n    ref: ref,\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    closeOnMaskClick: props.closeOnMaskClick,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation,\n    mouseWheel: props.mouseWheel,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender\n  }, function (_, actions) {\n    var _a;\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, value, actions);\n  }));\n});","map":{"version":3,"names":["React","forwardRef","useCallback","useMemo","useMemoizedFn","Picker","withNativeProps","mergeProps","usePropsValue","convertDateToStringArray","convertStringArrayToDate","generateDatePickerColumns","bound","useRenderLabel","TILL_NOW","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","defaultValue","DatePicker","p","ref","props","renderLabel","_usePropsValue","value","onChange","v","_a","onConfirm","call","_usePropsValue2","_slicedToArray","setValue","now","mergedRenderLabel","pickerValue","date","tillNow","getTime","val","onSelect","columns","selected","filter","createElement","onCancel","onClose","closeOnMaskClick","visible","confirmText","cancelText","getContainer","loading","loadingContent","afterShow","afterClose","onClick","title","stopPropagation","mouseWheel","destroyOnClose","forceRender","_","actions","children"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/date-picker/date-picker.js"],"sourcesContent":["import React, { forwardRef, useCallback, useMemo } from 'react';\nimport { useMemoizedFn } from 'ahooks';\nimport Picker from '../picker';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { convertDateToStringArray, convertStringArrayToDate, generateDatePickerColumns } from './date-picker-utils';\nimport { bound } from '../../utils/bound';\nimport useRenderLabel from '../date-picker-view/useRenderLabel';\nimport { TILL_NOW } from './util';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  defaultValue: null\n};\nexport const DatePicker = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    renderLabel\n  } = props;\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: props.defaultValue,\n    onChange: v => {\n      var _a;\n      if (v === null) return;\n      (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const now = useMemo(() => new Date(), []);\n  const mergedRenderLabel = useRenderLabel(renderLabel);\n  const pickerValue = useMemo(() => {\n    let date = value !== null && value !== void 0 ? value : now;\n    if (date.tillNow) {\n      return [TILL_NOW];\n    }\n    date = new Date(bound(date.getTime(), props.min.getTime(), props.max.getTime()));\n    return convertDateToStringArray(date, props.precision);\n  }, [value, props.precision, props.min, props.max]);\n  const onConfirm = useCallback(val => {\n    const date = convertStringArrayToDate(val, props.precision);\n    setValue(date, true);\n  }, [setValue, props.precision]);\n  const onSelect = useMemoizedFn(val => {\n    var _a;\n    const date = convertStringArrayToDate(val, props.precision);\n    (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n  });\n  const columns = useCallback(selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, mergedRenderLabel, props.filter, props.tillNow), [props.min, props.max, props.precision, mergedRenderLabel, props.tillNow]);\n  return withNativeProps(props, React.createElement(Picker, {\n    ref: ref,\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    closeOnMaskClick: props.closeOnMaskClick,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation,\n    mouseWheel: props.mouseWheel,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender\n  }, (_, actions) => {\n    var _a;\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, value, actions);\n  }));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}