{"ast":null,"code":"import useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nvar useDrag = function useDrag(data, target) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var optionsRef = useLatest(options);\n  var dataRef = useLatest(data);\n  useEffectWithTarget(function () {\n    var targetElement = getTargetElement(target);\n    if (!(targetElement === null || targetElement === void 0 ? void 0 : targetElement.addEventListener)) {\n      return;\n    }\n    var onDragStart = function onDragStart(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n      event.dataTransfer.setData('custom', JSON.stringify(dataRef.current));\n    };\n    var onDragEnd = function onDragEnd(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n    targetElement.setAttribute('draggable', 'true');\n    targetElement.addEventListener('dragstart', onDragStart);\n    targetElement.addEventListener('dragend', onDragEnd);\n    return function () {\n      targetElement.removeEventListener('dragstart', onDragStart);\n      targetElement.removeEventListener('dragend', onDragEnd);\n    };\n  }, [], target);\n};\nexport default useDrag;","map":{"version":3,"names":["useLatest","getTargetElement","useEffectWithTarget","useDrag","data","target","options","arguments","length","undefined","optionsRef","dataRef","targetElement","addEventListener","onDragStart","event","_a","_b","current","call","dataTransfer","setData","JSON","stringify","onDragEnd","setAttribute","removeEventListener"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/useDrag/index.js"],"sourcesContent":["import useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nconst useDrag = (data, target, options = {}) => {\n  const optionsRef = useLatest(options);\n  const dataRef = useLatest(data);\n  useEffectWithTarget(() => {\n    const targetElement = getTargetElement(target);\n    if (!(targetElement === null || targetElement === void 0 ? void 0 : targetElement.addEventListener)) {\n      return;\n    }\n    const onDragStart = event => {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n      event.dataTransfer.setData('custom', JSON.stringify(dataRef.current));\n    };\n    const onDragEnd = event => {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n    targetElement.setAttribute('draggable', 'true');\n    targetElement.addEventListener('dragstart', onDragStart);\n    targetElement.addEventListener('dragend', onDragEnd);\n    return () => {\n      targetElement.removeEventListener('dragstart', onDragStart);\n      targetElement.removeEventListener('dragend', onDragEnd);\n    };\n  }, [], target);\n};\nexport default useDrag;"],"mappings":"AAAA,OAAOA,SAAS,MAAM,cAAc;AACpC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,OAAOC,mBAAmB,MAAM,8BAA8B;AAC9D,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,IAAI,EAAEC,MAAM,EAAmB;EAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACzC,IAAMG,UAAU,GAAGV,SAAS,CAACM,OAAO,CAAC;EACrC,IAAMK,OAAO,GAAGX,SAAS,CAACI,IAAI,CAAC;EAC/BF,mBAAmB,CAAC,YAAM;IACxB,IAAMU,aAAa,GAAGX,gBAAgB,CAACI,MAAM,CAAC;IAC9C,IAAI,EAAEO,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,aAAa,CAACC,gBAAgB,CAAC,EAAE;MACnG;IACF;IACA,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAGC,KAAK,EAAI;MAC3B,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAGN,UAAU,CAACQ,OAAO,EAAEJ,WAAW,MAAM,IAAI,IAAIG,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,IAAI,CAACH,EAAE,EAAED,KAAK,CAAC;MACpGA,KAAK,CAACK,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAACZ,OAAO,CAACO,OAAO,CAAC,CAAC;IACvE,CAAC;IACD,IAAMM,SAAS,GAAG,SAAZA,SAASA,CAAGT,KAAK,EAAI;MACzB,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAGN,UAAU,CAACQ,OAAO,EAAEM,SAAS,MAAM,IAAI,IAAIP,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,IAAI,CAACH,EAAE,EAAED,KAAK,CAAC;IACpG,CAAC;IACDH,aAAa,CAACa,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC;IAC/Cb,aAAa,CAACC,gBAAgB,CAAC,WAAW,EAAEC,WAAW,CAAC;IACxDF,aAAa,CAACC,gBAAgB,CAAC,SAAS,EAAEW,SAAS,CAAC;IACpD,OAAO,YAAM;MACXZ,aAAa,CAACc,mBAAmB,CAAC,WAAW,EAAEZ,WAAW,CAAC;MAC3DF,aAAa,CAACc,mBAAmB,CAAC,SAAS,EAAEF,SAAS,CAAC;IACzD,CAAC;EACH,CAAC,EAAE,EAAE,EAAEnB,MAAM,CAAC;AAChB,CAAC;AACD,eAAeF,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}