{"ast":null,"code":"import _toConsumableArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport dayjs from 'dayjs';\nimport isoWeek from 'dayjs/plugin/isoWeek';\nimport isoWeeksInYear from 'dayjs/plugin/isoWeeksInYear';\nimport isLeapYear from 'dayjs/plugin/isLeapYear';\ndayjs.extend(isoWeek);\ndayjs.extend(isoWeeksInYear);\ndayjs.extend(isLeapYear);\nvar precisionRankRecord = {\n  year: 0,\n  week: 1,\n  'week-day': 2\n};\nexport function generateDatePickerColumns(selected, min, max, precision, renderLabel, filter) {\n  var ret = [];\n  var minYear = min.getFullYear();\n  var maxYear = max.getFullYear();\n  var rank = precisionRankRecord[precision];\n  var selectedYear = parseInt(selected[0]);\n  var isInMinYear = selectedYear === minYear;\n  var isInMaxYear = selectedYear === maxYear;\n  var minDay = dayjs(min);\n  var maxDay = dayjs(max);\n  var minWeek = minDay.isoWeek();\n  var maxWeek = maxDay.isoWeek();\n  var minWeekday = minDay.isoWeekday();\n  var maxWeekday = maxDay.isoWeekday();\n  var selectedWeek = parseInt(selected[1]);\n  var isInMinWeek = isInMinYear && selectedWeek === minWeek;\n  var isInMaxWeek = isInMaxYear && selectedWeek === maxWeek;\n  var selectedYearWeeks = dayjs(\"\".concat(selectedYear, \"-01-01\")).isoWeeksInYear();\n  var generateColumn = function generateColumn(from, to, precision) {\n    var column = [];\n    for (var i = from; i <= to; i++) {\n      column.push(i);\n    }\n    var prefix = selected.slice(0, precisionRankRecord[precision]);\n    var currentFilter = filter === null || filter === void 0 ? void 0 : filter[precision];\n    if (currentFilter && typeof currentFilter === 'function') {\n      column = column.filter(function (i) {\n        return currentFilter(i, {\n          get date() {\n            var stringArray = [].concat(_toConsumableArray(prefix), [i.toString()]);\n            return convertStringArrayToDate(stringArray);\n          }\n        });\n      });\n    }\n    return column;\n  };\n  if (rank >= precisionRankRecord.year) {\n    var lower = minYear;\n    var upper = maxYear;\n    var years = generateColumn(lower, upper, 'year');\n    ret.push(years.map(function (v) {\n      return {\n        label: renderLabel('year', v),\n        value: v.toString()\n      };\n    }));\n  }\n  if (rank >= precisionRankRecord.week) {\n    var _lower = isInMinYear ? minWeek : 1;\n    var _upper = isInMaxYear ? maxWeek : selectedYearWeeks;\n    var weeks = generateColumn(_lower, _upper, 'week');\n    ret.push(weeks.map(function (v) {\n      return {\n        label: renderLabel('week', v),\n        value: v.toString()\n      };\n    }));\n  }\n  if (rank >= precisionRankRecord['week-day']) {\n    var _lower2 = isInMinWeek ? minWeekday : 1;\n    var _upper2 = isInMaxWeek ? maxWeekday : 7;\n    var _weeks = generateColumn(_lower2, _upper2, 'week-day');\n    ret.push(_weeks.map(function (v) {\n      return {\n        label: renderLabel('week-day', v),\n        value: v.toString()\n      };\n    }));\n  }\n  return ret;\n}\nexport function convertDateToStringArray(date) {\n  if (!date) return [];\n  var day = dayjs(date);\n  return [day.isoWeekYear().toString(), day.isoWeek().toString(), day.isoWeekday().toString()];\n}\nexport function convertStringArrayToDate(value) {\n  var _a, _b, _c;\n  var yearString = (_a = value[0]) !== null && _a !== void 0 ? _a : '1900';\n  var weekString = (_b = value[1]) !== null && _b !== void 0 ? _b : '1';\n  var weekdayString = (_c = value[2]) !== null && _c !== void 0 ? _c : '1';\n  var day = dayjs().year(parseInt(yearString)).isoWeek(parseInt(weekString)).isoWeekday(parseInt(weekdayString)).hour(0).minute(0).second(0);\n  return day.toDate();\n}","map":{"version":3,"names":["dayjs","isoWeek","isoWeeksInYear","isLeapYear","extend","precisionRankRecord","year","week","generateDatePickerColumns","selected","min","max","precision","renderLabel","filter","ret","minYear","getFullYear","maxYear","rank","selectedYear","parseInt","isInMinYear","isInMaxYear","minDay","maxDay","minWeek","maxWeek","minWeekday","isoWeekday","maxWeekday","selectedWeek","isInMinWeek","isInMaxWeek","selectedYearWeeks","concat","generateColumn","from","to","column","i","push","prefix","slice","currentFilter","date","stringArray","_toConsumableArray","toString","convertStringArrayToDate","lower","upper","years","map","v","label","value","weeks","convertDateToStringArray","day","isoWeekYear","_a","_b","_c","yearString","weekString","weekdayString","hour","minute","second","toDate"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/date-picker/date-picker-week-utils.js"],"sourcesContent":["import dayjs from 'dayjs';\nimport isoWeek from 'dayjs/plugin/isoWeek';\nimport isoWeeksInYear from 'dayjs/plugin/isoWeeksInYear';\nimport isLeapYear from 'dayjs/plugin/isLeapYear';\ndayjs.extend(isoWeek);\ndayjs.extend(isoWeeksInYear);\ndayjs.extend(isLeapYear);\nconst precisionRankRecord = {\n  year: 0,\n  week: 1,\n  'week-day': 2\n};\nexport function generateDatePickerColumns(selected, min, max, precision, renderLabel, filter) {\n  const ret = [];\n  const minYear = min.getFullYear();\n  const maxYear = max.getFullYear();\n  const rank = precisionRankRecord[precision];\n  const selectedYear = parseInt(selected[0]);\n  const isInMinYear = selectedYear === minYear;\n  const isInMaxYear = selectedYear === maxYear;\n  const minDay = dayjs(min);\n  const maxDay = dayjs(max);\n  const minWeek = minDay.isoWeek();\n  const maxWeek = maxDay.isoWeek();\n  const minWeekday = minDay.isoWeekday();\n  const maxWeekday = maxDay.isoWeekday();\n  const selectedWeek = parseInt(selected[1]);\n  const isInMinWeek = isInMinYear && selectedWeek === minWeek;\n  const isInMaxWeek = isInMaxYear && selectedWeek === maxWeek;\n  const selectedYearWeeks = dayjs(`${selectedYear}-01-01`).isoWeeksInYear();\n  const generateColumn = (from, to, precision) => {\n    let column = [];\n    for (let i = from; i <= to; i++) {\n      column.push(i);\n    }\n    const prefix = selected.slice(0, precisionRankRecord[precision]);\n    const currentFilter = filter === null || filter === void 0 ? void 0 : filter[precision];\n    if (currentFilter && typeof currentFilter === 'function') {\n      column = column.filter(i => currentFilter(i, {\n        get date() {\n          const stringArray = [...prefix, i.toString()];\n          return convertStringArrayToDate(stringArray);\n        }\n      }));\n    }\n    return column;\n  };\n  if (rank >= precisionRankRecord.year) {\n    const lower = minYear;\n    const upper = maxYear;\n    const years = generateColumn(lower, upper, 'year');\n    ret.push(years.map(v => {\n      return {\n        label: renderLabel('year', v),\n        value: v.toString()\n      };\n    }));\n  }\n  if (rank >= precisionRankRecord.week) {\n    const lower = isInMinYear ? minWeek : 1;\n    const upper = isInMaxYear ? maxWeek : selectedYearWeeks;\n    const weeks = generateColumn(lower, upper, 'week');\n    ret.push(weeks.map(v => {\n      return {\n        label: renderLabel('week', v),\n        value: v.toString()\n      };\n    }));\n  }\n  if (rank >= precisionRankRecord['week-day']) {\n    const lower = isInMinWeek ? minWeekday : 1;\n    const upper = isInMaxWeek ? maxWeekday : 7;\n    const weeks = generateColumn(lower, upper, 'week-day');\n    ret.push(weeks.map(v => {\n      return {\n        label: renderLabel('week-day', v),\n        value: v.toString()\n      };\n    }));\n  }\n  return ret;\n}\nexport function convertDateToStringArray(date) {\n  if (!date) return [];\n  const day = dayjs(date);\n  return [day.isoWeekYear().toString(), day.isoWeek().toString(), day.isoWeekday().toString()];\n}\nexport function convertStringArrayToDate(value) {\n  var _a, _b, _c;\n  const yearString = (_a = value[0]) !== null && _a !== void 0 ? _a : '1900';\n  const weekString = (_b = value[1]) !== null && _b !== void 0 ? _b : '1';\n  const weekdayString = (_c = value[2]) !== null && _c !== void 0 ? _c : '1';\n  const day = dayjs().year(parseInt(yearString)).isoWeek(parseInt(weekString)).isoWeekday(parseInt(weekdayString)).hour(0).minute(0).second(0);\n  return day.toDate();\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}