{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useImperativeHandle, useRef, useState, useCallback } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport SafeArea from '../safe-area';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nvar classPrefix = \"adm-image-viewer\";\nvar defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport var ImageViewer = function ImageViewer(p) {\n  var _a;\n  var props = mergeProps(defaultProps, p);\n  var node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-content\")\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: function onTap() {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.image && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-footer\")\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.image), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nvar multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport var MultiImageViewer = forwardRef(function (p, ref) {\n  var _a;\n  var props = mergeProps(multiDefaultProps, p);\n  var _useState = useState(props.defaultIndex),\n    _useState2 = _slicedToArray(_useState, 2),\n    index = _useState2[0],\n    setIndex = _useState2[1];\n  var slidesRef = useRef(null);\n  useImperativeHandle(ref, function () {\n    return {\n      swipeTo: function swipeTo(index, immediate) {\n        var _a;\n        setIndex(index);\n        (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n      }\n    };\n  });\n  var onSlideChange = useCallback(function (index) {\n    var _a;\n    setIndex(index);\n    (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, index);\n  }, [props.onIndexChange]);\n  var node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-content\")\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: index,\n    onIndexChange: onSlideChange,\n    images: props.images,\n    onTap: function onTap() {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.images && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-footer\")\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.images[index], index), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n});","map":{"version":3,"names":["React","forwardRef","useImperativeHandle","useRef","useState","useCallback","mergeProps","renderToContainer","Mask","SafeArea","Slide","Slides","classPrefix","defaultProps","maxZoom","getContainer","visible","ImageViewer","p","_a","props","node","createElement","disableBodyScroll","opacity","afterClose","destroyOnClose","className","concat","image","onTap","onClose","call","renderFooter","position","multiDefaultProps","Object","assign","defaultIndex","MultiImageViewer","ref","_useState","_useState2","_slicedToArray","index","setIndex","slidesRef","swipeTo","immediate","current","onSlideChange","onIndexChange","images"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/image-viewer/image-viewer.js"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef, useState, useCallback } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport SafeArea from '../safe-area';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nconst classPrefix = `adm-image-viewer`;\nconst defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport const ImageViewer = p => {\n  var _a;\n  const props = mergeProps(defaultProps, p);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.image && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.image), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nconst multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport const MultiImageViewer = forwardRef((p, ref) => {\n  var _a;\n  const props = mergeProps(multiDefaultProps, p);\n  const [index, setIndex] = useState(props.defaultIndex);\n  const slidesRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    swipeTo: (index, immediate) => {\n      var _a;\n      setIndex(index);\n      (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n    }\n  }));\n  const onSlideChange = useCallback(index => {\n    var _a;\n    setIndex(index);\n    (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, index);\n  }, [props.onIndexChange]);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose,\n    destroyOnClose: true\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: index,\n    onIndexChange: onSlideChange,\n    images: props.images,\n    onTap: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })), props.images && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, (_a = props.renderFooter) === null || _a === void 0 ? void 0 : _a.call(props, props.images[index], index), React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n  return renderToContainer(props.getContainer, node);\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}