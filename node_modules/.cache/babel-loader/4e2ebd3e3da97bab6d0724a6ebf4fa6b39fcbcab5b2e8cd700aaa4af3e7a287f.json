{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/* eslint-disable no-empty */\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    var storage;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n    var serializer = function serializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    var deserializer = function deserializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n    var _useState = useState(function () {\n        return getStoredValue();\n      }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n    var updateState = function updateState(value) {\n      var currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}","map":{"version":3,"names":["useState","useMemoizedFn","useUpdateEffect","isFunction","isUndef","createUseStorageState","getStorage","useStorageState","key","options","storage","err","console","error","serializer","value","JSON","stringify","deserializer","parse","getStoredValue","raw","getItem","e","defaultValue","_useState","_useState2","_slicedToArray","state","setState","updateState","currentState","removeItem","setItem"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/createUseStorageState/index.js"],"sourcesContent":["/* eslint-disable no-empty */\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    let storage;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n    const serializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    const deserializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        const raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n    const [state, setState] = useState(() => getStoredValue());\n    useUpdateEffect(() => {\n      setState(getStoredValue());\n    }, [key]);\n    const updateState = value => {\n      const currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}