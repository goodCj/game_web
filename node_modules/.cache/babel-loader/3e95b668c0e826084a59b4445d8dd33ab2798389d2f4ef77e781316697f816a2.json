{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useState } from 'react';\nimport { useDrag } from '@use-gesture/react';\nimport { ThumbIcon } from './thumb-icon';\nimport Popover from '../popover';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-slider\";\nvar Thumb = function Thumb(props) {\n  var value = props.value,\n    min = props.min,\n    max = props.max,\n    disabled = props.disabled,\n    icon = props.icon,\n    residentPopover = props.residentPopover,\n    onDrag = props.onDrag;\n  var prevValue = useRef(value);\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var currentPosition = function currentPosition() {\n    return {\n      left: \"\".concat((value - min) / (max - min) * 100, \"%\"),\n      right: 'auto'\n    };\n  };\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    dragging = _useState2[0],\n    setDragging = _useState2[1];\n  var bind = useDrag(function (state) {\n    var _a;\n    if (disabled) return;\n    if (state.first) {\n      prevValue.current = value;\n    }\n    var x = state.xy[0] - state.initial[0];\n    var sliderOffsetWith = (_a = props.trackRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n    if (!sliderOffsetWith) return;\n    var diff = x / Math.ceil(sliderOffsetWith) * (max - min);\n    onDrag(prevValue.current + diff, state.first, state.last);\n    setDragging(!state.last);\n  }, {\n    axis: 'x',\n    pointer: {\n      touch: true\n    }\n  });\n  var renderPopoverContent = typeof props.popover === 'function' ? props.popover : props.popover ? function (value) {\n    return value.toString();\n  } : null;\n  var thumbElement = React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-thumb\")\n  }, icon ? icon : React.createElement(ThumbIcon, {\n    className: \"\".concat(classPrefix, \"-thumb-icon\")\n  }));\n  return React.createElement(\"div\", Object.assign({\n    className: \"\".concat(classPrefix, \"-thumb-container\"),\n    style: currentPosition()\n  }, bind(), {\n    role: 'slider',\n    \"aria-label\": props['aria-label'] || locale.Slider.name,\n    \"aria-valuemax\": max,\n    \"aria-valuemin\": min,\n    \"aria-valuenow\": value,\n    \"aria-disabled\": disabled\n  }), renderPopoverContent ? React.createElement(Popover, {\n    content: renderPopoverContent(value),\n    placement: 'top',\n    visible: residentPopover || dragging,\n    getContainer: null,\n    mode: 'dark'\n  }, thumbElement) : thumbElement);\n};\nexport default Thumb;","map":{"version":3,"names":["React","useRef","useState","useDrag","ThumbIcon","Popover","useConfig","classPrefix","Thumb","props","value","min","max","disabled","icon","residentPopover","onDrag","prevValue","_useConfig","locale","currentPosition","left","concat","right","_useState","_useState2","_slicedToArray","dragging","setDragging","bind","state","_a","first","current","x","xy","initial","sliderOffsetWith","trackRef","offsetWidth","diff","Math","ceil","last","axis","pointer","touch","renderPopoverContent","popover","toString","thumbElement","createElement","className","Object","assign","style","role","Slider","name","content","placement","visible","getContainer","mode"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/slider/thumb.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { useDrag } from '@use-gesture/react';\nimport { ThumbIcon } from './thumb-icon';\nimport Popover from '../popover';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-slider`;\nconst Thumb = props => {\n  const {\n    value,\n    min,\n    max,\n    disabled,\n    icon,\n    residentPopover,\n    onDrag\n  } = props;\n  const prevValue = useRef(value);\n  const {\n    locale\n  } = useConfig();\n  const currentPosition = () => {\n    return {\n      left: `${(value - min) / (max - min) * 100}%`,\n      right: 'auto'\n    };\n  };\n  const [dragging, setDragging] = useState(false);\n  const bind = useDrag(state => {\n    var _a;\n    if (disabled) return;\n    if (state.first) {\n      prevValue.current = value;\n    }\n    const x = state.xy[0] - state.initial[0];\n    const sliderOffsetWith = (_a = props.trackRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n    if (!sliderOffsetWith) return;\n    const diff = x / Math.ceil(sliderOffsetWith) * (max - min);\n    onDrag(prevValue.current + diff, state.first, state.last);\n    setDragging(!state.last);\n  }, {\n    axis: 'x',\n    pointer: {\n      touch: true\n    }\n  });\n  const renderPopoverContent = typeof props.popover === 'function' ? props.popover : props.popover ? value => value.toString() : null;\n  const thumbElement = React.createElement(\"div\", {\n    className: `${classPrefix}-thumb`\n  }, icon ? icon : React.createElement(ThumbIcon, {\n    className: `${classPrefix}-thumb-icon`\n  }));\n  return React.createElement(\"div\", Object.assign({\n    className: `${classPrefix}-thumb-container`,\n    style: currentPosition()\n  }, bind(), {\n    role: 'slider',\n    \"aria-label\": props['aria-label'] || locale.Slider.name,\n    \"aria-valuemax\": max,\n    \"aria-valuemin\": min,\n    \"aria-valuenow\": value,\n    \"aria-disabled\": disabled\n  }), renderPopoverContent ? React.createElement(Popover, {\n    content: renderPopoverContent(value),\n    placement: 'top',\n    visible: residentPopover || dragging,\n    getContainer: null,\n    mode: 'dark'\n  }, thumbElement) : thumbElement);\n};\nexport default Thumb;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}