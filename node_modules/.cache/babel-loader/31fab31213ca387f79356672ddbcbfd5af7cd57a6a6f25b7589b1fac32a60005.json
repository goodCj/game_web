{"ast":null,"code":"import React, { useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport Image from '../image';\nimport SpinLoading from '../spin-loading';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-image-uploader\";\nvar PreviewItem = function PreviewItem(props) {\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var url = props.url,\n    file = props.file,\n    deletable = props.deletable,\n    deleteIcon = props.deleteIcon,\n    onDelete = props.onDelete,\n    imageFit = props.imageFit;\n  var src = useMemo(function () {\n    if (url) {\n      return url;\n    }\n    if (file) {\n      return URL.createObjectURL(file);\n    }\n    return '';\n  }, [url, file]);\n  useEffect(function () {\n    return function () {\n      if (file) URL.revokeObjectURL(src);\n    };\n  }, [src, file]);\n  function renderLoading() {\n    return props.status === 'pending' && React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-cell-mask\")\n    }, React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-loading\")\n    }, React.createElement(SpinLoading, {\n      color: 'white'\n    }), React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-mask-message\")\n    }, locale.ImageUploader.uploading)));\n  }\n  function renderDelete() {\n    return deletable && React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-delete\"),\n      onClick: onDelete\n    }, deleteIcon);\n  }\n  return React.createElement(\"div\", {\n    className: classNames(\"\".concat(classPrefix, \"-cell\"), props.status === 'fail' && \"\".concat(classPrefix, \"-cell-fail\"))\n  }, React.createElement(Image, {\n    className: \"\".concat(classPrefix, \"-cell-image\"),\n    src: src,\n    fit: imageFit,\n    onClick: props.onClick\n  }), renderLoading(), renderDelete());\n};\nexport default PreviewItem;","map":{"version":3,"names":["React","useEffect","useMemo","classNames","Image","SpinLoading","useConfig","classPrefix","PreviewItem","props","_useConfig","locale","url","file","deletable","deleteIcon","onDelete","imageFit","src","URL","createObjectURL","revokeObjectURL","renderLoading","status","createElement","className","concat","color","ImageUploader","uploading","renderDelete","onClick","fit"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/image-uploader/preview-item.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport Image from '../image';\nimport SpinLoading from '../spin-loading';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-image-uploader`;\nconst PreviewItem = props => {\n  const {\n    locale\n  } = useConfig();\n  const {\n    url,\n    file,\n    deletable,\n    deleteIcon,\n    onDelete,\n    imageFit\n  } = props;\n  const src = useMemo(() => {\n    if (url) {\n      return url;\n    }\n    if (file) {\n      return URL.createObjectURL(file);\n    }\n    return '';\n  }, [url, file]);\n  useEffect(() => {\n    return () => {\n      if (file) URL.revokeObjectURL(src);\n    };\n  }, [src, file]);\n  function renderLoading() {\n    return props.status === 'pending' && React.createElement(\"div\", {\n      className: `${classPrefix}-cell-mask`\n    }, React.createElement(\"span\", {\n      className: `${classPrefix}-cell-loading`\n    }, React.createElement(SpinLoading, {\n      color: 'white'\n    }), React.createElement(\"span\", {\n      className: `${classPrefix}-cell-mask-message`\n    }, locale.ImageUploader.uploading)));\n  }\n  function renderDelete() {\n    return deletable && React.createElement(\"span\", {\n      className: `${classPrefix}-cell-delete`,\n      onClick: onDelete\n    }, deleteIcon);\n  }\n  return React.createElement(\"div\", {\n    className: classNames(`${classPrefix}-cell`, props.status === 'fail' && `${classPrefix}-cell-fail`)\n  }, React.createElement(Image, {\n    className: `${classPrefix}-cell-image`,\n    src: src,\n    fit: imageFit,\n    onClick: props.onClick\n  }), renderLoading(), renderDelete());\n};\nexport default PreviewItem;"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AACjD,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,WAAW,MAAM,iBAAiB;AACzC,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,IAAMC,WAAW,uBAAuB;AACxC,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAGC,KAAK,EAAI;EAC3B,IAAAC,UAAA,GAEIJ,SAAS,EAAE;IADbK,MAAM,GAAAD,UAAA,CAANC,MAAM;EAER,IACEC,GAAG,GAMDH,KAAK,CANPG,GAAG;IACHC,IAAI,GAKFJ,KAAK,CALPI,IAAI;IACJC,SAAS,GAIPL,KAAK,CAJPK,SAAS;IACTC,UAAU,GAGRN,KAAK,CAHPM,UAAU;IACVC,QAAQ,GAENP,KAAK,CAFPO,QAAQ;IACRC,QAAQ,GACNR,KAAK,CADPQ,QAAQ;EAEV,IAAMC,GAAG,GAAGhB,OAAO,CAAC,YAAM;IACxB,IAAIU,GAAG,EAAE;MACP,OAAOA,GAAG;IACZ;IACA,IAAIC,IAAI,EAAE;MACR,OAAOM,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC;IAClC;IACA,OAAO,EAAE;EACX,CAAC,EAAE,CAACD,GAAG,EAAEC,IAAI,CAAC,CAAC;EACfZ,SAAS,CAAC,YAAM;IACd,OAAO,YAAM;MACX,IAAIY,IAAI,EAAEM,GAAG,CAACE,eAAe,CAACH,GAAG,CAAC;IACpC,CAAC;EACH,CAAC,EAAE,CAACA,GAAG,EAAEL,IAAI,CAAC,CAAC;EACf,SAASS,aAAaA,CAAA,EAAG;IACvB,OAAOb,KAAK,CAACc,MAAM,KAAK,SAAS,IAAIvB,KAAK,CAACwB,aAAa,CAAC,KAAK,EAAE;MAC9DC,SAAS,KAAAC,MAAA,CAAKnB,WAAW;IAC3B,CAAC,EAAEP,KAAK,CAACwB,aAAa,CAAC,MAAM,EAAE;MAC7BC,SAAS,KAAAC,MAAA,CAAKnB,WAAW;IAC3B,CAAC,EAAEP,KAAK,CAACwB,aAAa,CAACnB,WAAW,EAAE;MAClCsB,KAAK,EAAE;IACT,CAAC,CAAC,EAAE3B,KAAK,CAACwB,aAAa,CAAC,MAAM,EAAE;MAC9BC,SAAS,KAAAC,MAAA,CAAKnB,WAAW;IAC3B,CAAC,EAAEI,MAAM,CAACiB,aAAa,CAACC,SAAS,CAAC,CAAC,CAAC;EACtC;EACA,SAASC,YAAYA,CAAA,EAAG;IACtB,OAAOhB,SAAS,IAAId,KAAK,CAACwB,aAAa,CAAC,MAAM,EAAE;MAC9CC,SAAS,KAAAC,MAAA,CAAKnB,WAAW,iBAAc;MACvCwB,OAAO,EAAEf;IACX,CAAC,EAAED,UAAU,CAAC;EAChB;EACA,OAAOf,KAAK,CAACwB,aAAa,CAAC,KAAK,EAAE;IAChCC,SAAS,EAAEtB,UAAU,IAAAuB,MAAA,CAAInB,WAAW,YAASE,KAAK,CAACc,MAAM,KAAK,MAAM,OAAAG,MAAA,CAAOnB,WAAW,eAAY;EACpG,CAAC,EAAEP,KAAK,CAACwB,aAAa,CAACpB,KAAK,EAAE;IAC5BqB,SAAS,KAAAC,MAAA,CAAKnB,WAAW,gBAAa;IACtCW,GAAG,EAAEA,GAAG;IACRc,GAAG,EAAEf,QAAQ;IACbc,OAAO,EAAEtB,KAAK,CAACsB;EACjB,CAAC,CAAC,EAAET,aAAa,EAAE,EAAEQ,YAAY,EAAE,CAAC;AACtC,CAAC;AACD,eAAetB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}