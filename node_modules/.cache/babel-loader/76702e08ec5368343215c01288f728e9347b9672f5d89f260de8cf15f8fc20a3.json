{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useUnmountedRef } from 'ahooks';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { ShouldRender } from '../../utils/should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nvar classPrefix = \"adm-mask\";\nvar opacityRecord = {\n  default: 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nvar colorRecord = {\n  black: '0, 0, 0',\n  white: '255, 255, 255'\n};\nvar defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport var Mask = function Mask(p) {\n  var props = mergeProps(defaultProps, p);\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  var background = useMemo(function () {\n    var _a;\n    var opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    var rgb = colorRecord[props.color];\n    return rgb ? \"rgba(\".concat(rgb, \", \").concat(opacity, \")\") : props.color;\n  }, [props.color, props.opacity]);\n  var _useState = useState(props.visible),\n    _useState2 = _slicedToArray(_useState, 2),\n    active = _useState2[0],\n    setActive = _useState2[1];\n  var unmountedRef = useUnmountedRef();\n  var _useSpring = useSpring({\n      opacity: props.visible ? 1 : 0,\n      config: {\n        precision: 0.01,\n        mass: 1,\n        tension: 250,\n        friction: 30,\n        clamp: true\n      },\n      onStart: function onStart() {\n        setActive(true);\n      },\n      onRest: function onRest() {\n        var _a, _b;\n        if (unmountedRef.current) return;\n        setActive(props.visible);\n        if (props.visible) {\n          (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n        } else {\n          (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n        }\n      }\n    }),\n    opacity = _useSpring.opacity;\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({}, props.style), {\n      background: background,\n      opacity: opacity,\n      display: active ? undefined : 'none'\n    }),\n    onClick: function onClick(e) {\n      var _a;\n      if (e.target === e.currentTarget) {\n        (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      }\n    }\n  }, props.onMaskClick && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-aria-button\"),\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-content\")\n  }, props.children))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};","map":{"version":3,"names":["withNativeProps","React","useMemo","useRef","useState","useUnmountedRef","useLockScroll","useSpring","animated","renderToContainer","mergeProps","useConfig","ShouldRender","withStopPropagation","classPrefix","opacityRecord","default","thin","thick","colorRecord","black","white","defaultProps","visible","destroyOnClose","forceRender","color","opacity","disableBodyScroll","getContainer","stopPropagation","Mask","p","props","_useConfig","locale","ref","background","_a","rgb","concat","_useState","_useState2","_slicedToArray","active","setActive","unmountedRef","_useSpring","config","precision","mass","tension","friction","clamp","onStart","onRest","_b","current","afterShow","call","afterClose","node","createElement","div","className","style","Object","assign","display","undefined","onClick","e","target","currentTarget","onMaskClick","role","name","children"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/mask/mask.js"],"sourcesContent":["import { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useUnmountedRef } from 'ahooks';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { ShouldRender } from '../../utils/should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nconst classPrefix = `adm-mask`;\nconst opacityRecord = {\n  default: 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nconst colorRecord = {\n  black: '0, 0, 0',\n  white: '255, 255, 255'\n};\nconst defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport const Mask = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    locale\n  } = useConfig();\n  const ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  const background = useMemo(() => {\n    var _a;\n    const opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    const rgb = colorRecord[props.color];\n    return rgb ? `rgba(${rgb}, ${opacity})` : props.color;\n  }, [props.color, props.opacity]);\n  const [active, setActive] = useState(props.visible);\n  const unmountedRef = useUnmountedRef();\n  const {\n    opacity\n  } = useSpring({\n    opacity: props.visible ? 1 : 0,\n    config: {\n      precision: 0.01,\n      mass: 1,\n      tension: 250,\n      friction: 30,\n      clamp: true\n    },\n    onStart: () => {\n      setActive(true);\n    },\n    onRest: () => {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({}, props.style), {\n      background,\n      opacity,\n      display: active ? undefined : 'none'\n    }),\n    onClick: e => {\n      var _a;\n      if (e.target === e.currentTarget) {\n        (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      }\n    }\n  }, props.onMaskClick && React.createElement(\"div\", {\n    className: `${classPrefix}-aria-button`,\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.children))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}