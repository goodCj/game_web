{"ast":null,"code":"import _toConsumableArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { Wheel } from './wheel';\nimport { useColumnsExtend } from './columns-extend';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useDebounceEffect } from 'ahooks';\nimport { defaultRenderLabel } from '../picker/picker-utils';\nimport SpinLoading from '../spin-loading';\nvar classPrefix = \"adm-picker-view\";\nvar defaultProps = {\n  defaultValue: [],\n  renderLabel: defaultRenderLabel,\n  mouseWheel: false,\n  loadingContent: React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-loading-content\")\n  }, React.createElement(SpinLoading, null))\n};\nexport var PickerView = memo(function (p) {\n  var props = mergeProps(defaultProps, p);\n  var _useState = useState(props.value === undefined ? props.defaultValue : props.value),\n    _useState2 = _slicedToArray(_useState, 2),\n    innerValue = _useState2[0],\n    setInnerValue = _useState2[1];\n  // Sync `value` to `innerValue`\n  useEffect(function () {\n    if (props.value === undefined) return; // Uncontrolled mode\n    if (props.value === innerValue) return;\n    setInnerValue(props.value);\n  }, [props.value]);\n  useEffect(function () {\n    if (props.value === innerValue) return;\n    var timeout = window.setTimeout(function () {\n      if (props.value !== undefined && props.value !== innerValue) {\n        setInnerValue(props.value);\n      }\n    }, 1000);\n    return function () {\n      window.clearTimeout(timeout);\n    };\n  }, [props.value, innerValue]);\n  var extend = useColumnsExtend(props.columns, innerValue);\n  var columns = extend.columns;\n  useDebounceEffect(function () {\n    var _a;\n    if (props.value === innerValue) return;\n    (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, innerValue, extend);\n  }, [innerValue], {\n    wait: 0,\n    leading: false,\n    trailing: true\n  });\n  var handleSelect = useCallback(function (val, index) {\n    setInnerValue(function (prev) {\n      var next = _toConsumableArray(prev);\n      next[index] = val;\n      return next;\n    });\n  }, []);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix)\n  }, props.loading ? props.loadingContent : React.createElement(React.Fragment, null, columns.map(function (column, index) {\n    return React.createElement(Wheel, {\n      key: index,\n      index: index,\n      column: column,\n      value: innerValue[index],\n      onSelect: handleSelect,\n      renderLabel: props.renderLabel,\n      mouseWheel: props.mouseWheel\n    });\n  }), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-mask\")\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-mask-top\")\n  }), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-mask-middle\")\n  }), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-mask-bottom\")\n  })))));\n});\nPickerView.displayName = 'PickerView';","map":{"version":3,"names":["React","memo","useCallback","useEffect","useState","mergeProps","Wheel","useColumnsExtend","withNativeProps","useDebounceEffect","defaultRenderLabel","SpinLoading","classPrefix","defaultProps","defaultValue","renderLabel","mouseWheel","loadingContent","createElement","className","concat","PickerView","p","props","_useState","value","undefined","_useState2","_slicedToArray","innerValue","setInnerValue","timeout","window","setTimeout","clearTimeout","extend","columns","_a","onChange","call","wait","leading","trailing","handleSelect","val","index","prev","next","_toConsumableArray","loading","Fragment","map","column","key","onSelect","displayName"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/picker-view/picker-view.js"],"sourcesContent":["import React, { memo, useCallback, useEffect, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { Wheel } from './wheel';\nimport { useColumnsExtend } from './columns-extend';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useDebounceEffect } from 'ahooks';\nimport { defaultRenderLabel } from '../picker/picker-utils';\nimport SpinLoading from '../spin-loading';\nconst classPrefix = `adm-picker-view`;\nconst defaultProps = {\n  defaultValue: [],\n  renderLabel: defaultRenderLabel,\n  mouseWheel: false,\n  loadingContent: React.createElement(\"div\", {\n    className: `${classPrefix}-loading-content`\n  }, React.createElement(SpinLoading, null))\n};\nexport const PickerView = memo(p => {\n  const props = mergeProps(defaultProps, p);\n  const [innerValue, setInnerValue] = useState(props.value === undefined ? props.defaultValue : props.value);\n  // Sync `value` to `innerValue`\n  useEffect(() => {\n    if (props.value === undefined) return; // Uncontrolled mode\n    if (props.value === innerValue) return;\n    setInnerValue(props.value);\n  }, [props.value]);\n  useEffect(() => {\n    if (props.value === innerValue) return;\n    const timeout = window.setTimeout(() => {\n      if (props.value !== undefined && props.value !== innerValue) {\n        setInnerValue(props.value);\n      }\n    }, 1000);\n    return () => {\n      window.clearTimeout(timeout);\n    };\n  }, [props.value, innerValue]);\n  const extend = useColumnsExtend(props.columns, innerValue);\n  const columns = extend.columns;\n  useDebounceEffect(() => {\n    var _a;\n    if (props.value === innerValue) return;\n    (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, innerValue, extend);\n  }, [innerValue], {\n    wait: 0,\n    leading: false,\n    trailing: true\n  });\n  const handleSelect = useCallback((val, index) => {\n    setInnerValue(prev => {\n      const next = [...prev];\n      next[index] = val;\n      return next;\n    });\n  }, []);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: `${classPrefix}`\n  }, props.loading ? props.loadingContent : React.createElement(React.Fragment, null, columns.map((column, index) => React.createElement(Wheel, {\n    key: index,\n    index: index,\n    column: column,\n    value: innerValue[index],\n    onSelect: handleSelect,\n    renderLabel: props.renderLabel,\n    mouseWheel: props.mouseWheel\n  })), React.createElement(\"div\", {\n    className: `${classPrefix}-mask`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-mask-top`\n  }), React.createElement(\"div\", {\n    className: `${classPrefix}-mask-middle`\n  }), React.createElement(\"div\", {\n    className: `${classPrefix}-mask-bottom`\n  })))));\n});\nPickerView.displayName = 'PickerView';"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACrE,SAASC,UAAU,QAAQ,gCAAgC;AAC3D,SAASC,KAAK,QAAQ,SAAS;AAC/B,SAASC,gBAAgB,QAAQ,kBAAkB;AACnD,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,iBAAiB,QAAQ,QAAQ;AAC1C,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,OAAOC,WAAW,MAAM,iBAAiB;AACzC,IAAMC,WAAW,oBAAoB;AACrC,IAAMC,YAAY,GAAG;EACnBC,YAAY,EAAE,EAAE;EAChBC,WAAW,EAAEL,kBAAkB;EAC/BM,UAAU,EAAE,KAAK;EACjBC,cAAc,EAAEjB,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IACzCC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,EAAEZ,KAAK,CAACkB,aAAa,CAACP,WAAW,EAAE,IAAI,CAAC;AAC3C,CAAC;AACD,OAAO,IAAMU,UAAU,GAAGpB,IAAI,CAAC,UAAAqB,CAAC,EAAI;EAClC,IAAMC,KAAK,GAAGlB,UAAU,CAACQ,YAAY,EAAES,CAAC,CAAC;EACzC,IAAAE,SAAA,GAAoCpB,QAAQ,CAACmB,KAAK,CAACE,KAAK,KAAKC,SAAS,GAAGH,KAAK,CAACT,YAAY,GAAGS,KAAK,CAACE,KAAK,CAAC;IAAAE,UAAA,GAAAC,cAAA,CAAAJ,SAAA;IAAnGK,UAAU,GAAAF,UAAA;IAAEG,aAAa,GAAAH,UAAA;EAChC;EACAxB,SAAS,CAAC,YAAM;IACd,IAAIoB,KAAK,CAACE,KAAK,KAAKC,SAAS,EAAE,OAAO,CAAC;IACvC,IAAIH,KAAK,CAACE,KAAK,KAAKI,UAAU,EAAE;IAChCC,aAAa,CAACP,KAAK,CAACE,KAAK,CAAC;EAC5B,CAAC,EAAE,CAACF,KAAK,CAACE,KAAK,CAAC,CAAC;EACjBtB,SAAS,CAAC,YAAM;IACd,IAAIoB,KAAK,CAACE,KAAK,KAAKI,UAAU,EAAE;IAChC,IAAME,OAAO,GAAGC,MAAM,CAACC,UAAU,CAAC,YAAM;MACtC,IAAIV,KAAK,CAACE,KAAK,KAAKC,SAAS,IAAIH,KAAK,CAACE,KAAK,KAAKI,UAAU,EAAE;QAC3DC,aAAa,CAACP,KAAK,CAACE,KAAK,CAAC;MAC5B;IACF,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,YAAM;MACXO,MAAM,CAACE,YAAY,CAACH,OAAO,CAAC;IAC9B,CAAC;EACH,CAAC,EAAE,CAACR,KAAK,CAACE,KAAK,EAAEI,UAAU,CAAC,CAAC;EAC7B,IAAMM,MAAM,GAAG5B,gBAAgB,CAACgB,KAAK,CAACa,OAAO,EAAEP,UAAU,CAAC;EAC1D,IAAMO,OAAO,GAAGD,MAAM,CAACC,OAAO;EAC9B3B,iBAAiB,CAAC,YAAM;IACtB,IAAI4B,EAAE;IACN,IAAId,KAAK,CAACE,KAAK,KAAKI,UAAU,EAAE;IAChC,CAACQ,EAAE,GAAGd,KAAK,CAACe,QAAQ,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,IAAI,CAAChB,KAAK,EAAEM,UAAU,EAAEM,MAAM,CAAC;EAC/F,CAAC,EAAE,CAACN,UAAU,CAAC,EAAE;IACfW,IAAI,EAAE,CAAC;IACPC,OAAO,EAAE,KAAK;IACdC,QAAQ,EAAE;EACZ,CAAC,CAAC;EACF,IAAMC,YAAY,GAAGzC,WAAW,CAAC,UAAC0C,GAAG,EAAEC,KAAK,EAAK;IAC/Cf,aAAa,CAAC,UAAAgB,IAAI,EAAI;MACpB,IAAMC,IAAI,GAAAC,kBAAA,CAAOF,IAAI,CAAC;MACtBC,IAAI,CAACF,KAAK,CAAC,GAAGD,GAAG;MACjB,OAAOG,IAAI;IACb,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EACN,OAAOvC,eAAe,CAACe,KAAK,EAAEvB,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IACvDC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,EAAEW,KAAK,CAAC0B,OAAO,GAAG1B,KAAK,CAACN,cAAc,GAAGjB,KAAK,CAACkB,aAAa,CAAClB,KAAK,CAACkD,QAAQ,EAAE,IAAI,EAAEd,OAAO,CAACe,GAAG,CAAC,UAACC,MAAM,EAAEP,KAAK;IAAA,OAAK7C,KAAK,CAACkB,aAAa,CAACZ,KAAK,EAAE;MAC5I+C,GAAG,EAAER,KAAK;MACVA,KAAK,EAAEA,KAAK;MACZO,MAAM,EAAEA,MAAM;MACd3B,KAAK,EAAEI,UAAU,CAACgB,KAAK,CAAC;MACxBS,QAAQ,EAAEX,YAAY;MACtB5B,WAAW,EAAEQ,KAAK,CAACR,WAAW;MAC9BC,UAAU,EAAEO,KAAK,CAACP;IACpB,CAAC,CAAC;EAAA,EAAC,EAAEhB,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IAC9BC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,EAAEZ,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IAC5BC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,CAAC,EAAEZ,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IAC7BC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,CAAC,EAAEZ,KAAK,CAACkB,aAAa,CAAC,KAAK,EAAE;IAC7BC,SAAS,KAAAC,MAAA,CAAKR,WAAW;EAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACR,CAAC,CAAC;AACFS,UAAU,CAACkC,WAAW,GAAG,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}