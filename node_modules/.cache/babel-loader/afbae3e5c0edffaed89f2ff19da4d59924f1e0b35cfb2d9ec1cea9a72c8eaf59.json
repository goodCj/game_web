{"ast":null,"code":"import _defineProperty from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport Button from '../button';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-search-bar\";\nvar defaultProps = {\n  clearable: true,\n  onlyShowClearWhenFocus: false,\n  showCancelButton: false,\n  defaultValue: '',\n  clearOnCancel: true,\n  icon: React.createElement(SearchOutline, null)\n};\nexport var SearchBar = forwardRef(function (p, ref) {\n  var _useConfig = useConfig(),\n    locale = _useConfig.locale;\n  var props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n  var _usePropsValue = usePropsValue(props),\n    _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n    value = _usePropsValue2[0],\n    setValue = _usePropsValue2[1];\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasFocus = _useState2[0],\n    setHasFocus = _useState2[1];\n  var inputRef = useRef(null);\n  var composingRef = useRef(false);\n  useImperativeHandle(ref, function () {\n    return {\n      clear: function clear() {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n      },\n      focus: function focus() {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function blur() {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n      get nativeElement() {\n        var _a, _b;\n        return (_b = (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.nativeElement) !== null && _b !== void 0 ? _b : null;\n      }\n    };\n  });\n  var renderCancelButton = function renderCancelButton() {\n    var isShowCancel;\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n    return isShowCancel && React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-suffix\")\n    }, React.createElement(Button, {\n      fill: 'none',\n      className: \"\".concat(classPrefix, \"-cancel-button\"),\n      onClick: function onClick() {\n        var _a, _b, _c;\n        if (props.clearOnCancel) {\n          (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        }\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      },\n      onMouseDown: function onMouseDown(e) {\n        e.preventDefault();\n      }\n    }, props.cancelText));\n  };\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, _defineProperty({}, \"\".concat(classPrefix, \"-active\"), hasFocus))\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-input-box\")\n  }, props.icon && React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-input-box-icon\")\n  }, props.icon), React.createElement(Input, {\n    ref: inputRef,\n    className: classNames(\"\".concat(classPrefix, \"-input\"), _defineProperty({}, \"\".concat(classPrefix, \"-input-without-icon\"), !props.icon)),\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onlyShowClearWhenFocus: props.onlyShowClearWhenFocus,\n    onFocus: function onFocus(e) {\n      var _a;\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: function onBlur(e) {\n      var _a;\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    enterKeyHint: 'search',\n    onEnterPress: function onEnterPress() {\n      var _a, _b;\n      if (!composingRef.current) {\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n        (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n      }\n    },\n    \"aria-label\": locale.SearchBar.name,\n    onCompositionStart: function onCompositionStart() {\n      composingRef.current = true;\n    },\n    onCompositionEnd: function onCompositionEnd() {\n      composingRef.current = false;\n    }\n  })), renderCancelButton()));\n});","map":{"version":3,"names":["React","useState","useRef","forwardRef","useImperativeHandle","classNames","Input","Button","withNativeProps","mergeProps","SearchOutline","usePropsValue","useConfig","classPrefix","defaultProps","clearable","onlyShowClearWhenFocus","showCancelButton","defaultValue","clearOnCancel","icon","createElement","SearchBar","p","ref","_useConfig","locale","props","cancelText","common","cancel","_usePropsValue","_usePropsValue2","_slicedToArray","value","setValue","_useState","_useState2","hasFocus","setHasFocus","inputRef","composingRef","clear","_a","current","focus","blur","nativeElement","_b","renderCancelButton","isShowCancel","className","concat","fill","onClick","_c","onCancel","call","onMouseDown","e","preventDefault","_defineProperty","onChange","maxLength","placeholder","onFocus","onBlur","onClear","type","enterKeyHint","onEnterPress","onSearch","name","onCompositionStart","onCompositionEnd"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/search-bar/search-bar.js"],"sourcesContent":["import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport Button from '../button';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-search-bar`;\nconst defaultProps = {\n  clearable: true,\n  onlyShowClearWhenFocus: false,\n  showCancelButton: false,\n  defaultValue: '',\n  clearOnCancel: true,\n  icon: React.createElement(SearchOutline, null)\n};\nexport const SearchBar = forwardRef((p, ref) => {\n  const {\n    locale\n  } = useConfig();\n  const props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n  const [value, setValue] = usePropsValue(props);\n  const [hasFocus, setHasFocus] = useState(false);\n  const inputRef = useRef(null);\n  const composingRef = useRef(false);\n  useImperativeHandle(ref, () => ({\n    clear: () => {\n      var _a;\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n    },\n    focus: () => {\n      var _a;\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    },\n    get nativeElement() {\n      var _a, _b;\n      return (_b = (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.nativeElement) !== null && _b !== void 0 ? _b : null;\n    }\n  }));\n  const renderCancelButton = () => {\n    let isShowCancel;\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n    return isShowCancel && React.createElement(\"div\", {\n      className: `${classPrefix}-suffix`\n    }, React.createElement(Button, {\n      fill: 'none',\n      className: `${classPrefix}-cancel-button`,\n      onClick: () => {\n        var _a, _b, _c;\n        if (props.clearOnCancel) {\n          (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        }\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      },\n      onMouseDown: e => {\n        e.preventDefault();\n      }\n    }, props.cancelText));\n  };\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, {\n      [`${classPrefix}-active`]: hasFocus\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-input-box`\n  }, props.icon && React.createElement(\"div\", {\n    className: `${classPrefix}-input-box-icon`\n  }, props.icon), React.createElement(Input, {\n    ref: inputRef,\n    className: classNames(`${classPrefix}-input`, {\n      [`${classPrefix}-input-without-icon`]: !props.icon\n    }),\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onlyShowClearWhenFocus: props.onlyShowClearWhenFocus,\n    onFocus: e => {\n      var _a;\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: e => {\n      var _a;\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    enterKeyHint: 'search',\n    onEnterPress: () => {\n      var _a, _b;\n      if (!composingRef.current) {\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n        (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n      }\n    },\n    \"aria-label\": locale.SearchBar.name,\n    onCompositionStart: () => {\n      composingRef.current = true;\n    },\n    onCompositionEnd: () => {\n      composingRef.current = false;\n    }\n  })), renderCancelButton()));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}