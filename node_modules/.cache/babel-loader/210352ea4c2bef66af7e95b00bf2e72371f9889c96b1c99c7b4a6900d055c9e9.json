{"ast":null,"code":"import _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nvar defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport var CenterPopup = function CenterPopup(p) {\n  var props = mergeProps(defaultProps, p);\n  var unmountedRef = useUnmountedRef();\n  var style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: function onRest() {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  var _useState = useState(props.visible),\n    _useState2 = _slicedToArray(_useState, 2),\n    active = _useState2[0],\n    setActive = _useState2[1];\n  useIsomorphicLayoutEffect(function () {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  var ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  var maskVisible = useInnerVisible(active && props.visible);\n  var body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: function onMaskClick(e) {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: function onClick() {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};","map":{"version":3,"names":["React","useRef","useState","renderToContainer","Mask","withStopPropagation","mergeProps","useIsomorphicLayoutEffect","useUnmountedRef","animated","useSpring","useInnerVisible","classNames","withNativeProps","ShouldRender","useLockScroll","CloseOutline","defaultPopupBaseProps","defaultProps","Object","assign","getContainer","CenterPopup","p","props","unmountedRef","style","scale","visible","opacity","config","mass","tension","friction","clamp","onRest","_a","_b","current","setActive","afterShow","call","afterClose","_useState","_useState2","_slicedToArray","active","ref","disableBodyScroll","maskVisible","body","createElement","className","bodyClassName","bodyStyle","children","node","stopPropagation","display","undefined","pointerEvents","mask","forceRender","destroyOnClose","onMaskClick","e","closeOnMaskClick","onClose","maskStyle","maskClassName","role","div","showCloseButton","onClick"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/center-popup/center-popup.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport const CenterPopup = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: () => {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  const maskVisible = useInnerVisible(active && props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}