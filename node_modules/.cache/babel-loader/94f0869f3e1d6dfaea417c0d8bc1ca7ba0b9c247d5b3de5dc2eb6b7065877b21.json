{"ast":null,"code":"import _defineProperty from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/liusu/Desktop/h5_free/game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nvar classPrefix = \"adm-water-mark\";\nvar defaultProps = {\n  fullPage: true\n};\nexport var WaterMark = function WaterMark(p) {\n  var props = mergeProps(defaultProps, p);\n  var _props$zIndex = props.zIndex,\n    zIndex = _props$zIndex === void 0 ? 2000 : _props$zIndex,\n    _props$gapX = props.gapX,\n    gapX = _props$gapX === void 0 ? 24 : _props$gapX,\n    _props$gapY = props.gapY,\n    gapY = _props$gapY === void 0 ? 48 : _props$gapY,\n    _props$width = props.width,\n    width = _props$width === void 0 ? 120 : _props$width,\n    _props$height = props.height,\n    height = _props$height === void 0 ? 64 : _props$height,\n    _props$rotate = props.rotate,\n    rotate = _props$rotate === void 0 ? -22 : _props$rotate,\n    image = props.image,\n    _props$imageWidth = props.imageWidth,\n    imageWidth = _props$imageWidth === void 0 ? 120 : _props$imageWidth,\n    _props$imageHeight = props.imageHeight,\n    imageHeight = _props$imageHeight === void 0 ? 64 : _props$imageHeight,\n    content = props.content,\n    _props$fontStyle = props.fontStyle,\n    fontStyle = _props$fontStyle === void 0 ? 'normal' : _props$fontStyle,\n    _props$fontWeight = props.fontWeight,\n    fontWeight = _props$fontWeight === void 0 ? 'normal' : _props$fontWeight,\n    _props$fontColor = props.fontColor,\n    fontColor = _props$fontColor === void 0 ? 'rgba(0,0,0,.15)' : _props$fontColor,\n    _props$fontSize = props.fontSize,\n    fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,\n    _props$fontFamily = props.fontFamily,\n    fontFamily = _props$fontFamily === void 0 ? 'sans-serif' : _props$fontFamily;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    base64Url = _useState2[0],\n    setBase64Url = _useState2[1];\n  useEffect(function () {\n    var canvas = document.createElement('canvas');\n    var ratio = window.devicePixelRatio;\n    var ctx = canvas.getContext('2d');\n    var canvasWidth = \"\".concat((gapX + width) * ratio, \"px\");\n    var canvasHeight = \"\".concat((gapY + height) * ratio, \"px\");\n    var markWidth = width * ratio;\n    var markHeight = height * ratio;\n    canvas.setAttribute('width', canvasWidth);\n    canvas.setAttribute('height', canvasHeight);\n    if (ctx) {\n      if (image) {\n        ctx.translate(markWidth / 2, markHeight / 2);\n        ctx.rotate(Math.PI / 180 * Number(rotate));\n        var img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.onload = function () {\n          ctx.drawImage(img, -imageWidth * ratio / 2, -imageHeight * ratio / 2, imageWidth * ratio, imageHeight * ratio);\n          ctx.restore();\n          setBase64Url(canvas.toDataURL());\n        };\n        img.src = image;\n      } else if (content) {\n        ctx.textBaseline = 'middle';\n        ctx.textAlign = 'center';\n        // 文字绕中间旋转\n        ctx.translate(markWidth / 2, markHeight / 2);\n        ctx.rotate(Math.PI / 180 * Number(rotate));\n        var markSize = Number(fontSize) * ratio;\n        ctx.font = \"\".concat(fontStyle, \" normal \").concat(fontWeight, \" \").concat(markSize, \"px/\").concat(markHeight, \"px \").concat(fontFamily);\n        ctx.fillStyle = fontColor;\n        if (Array.isArray(content)) {\n          content.forEach(function (item, index) {\n            return ctx.fillText(item, 0, index * markSize);\n          });\n        } else {\n          ctx.fillText(content, 0, 0);\n        }\n        ctx.restore();\n        setBase64Url(canvas.toDataURL());\n      }\n    } else {\n      throw new Error('Canvas is not supported in the current environment');\n    }\n  }, [gapX, gapY, rotate, fontStyle, fontWeight, width, height, fontFamily, fontColor, image, content, fontSize]);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, _defineProperty({}, \"\".concat(classPrefix, \"-full-page\"), props.fullPage)),\n    style: {\n      zIndex: zIndex,\n      backgroundSize: \"\".concat(gapX + width, \"px\"),\n      backgroundImage: \"url('\".concat(base64Url, \"')\")\n    }\n  }));\n};","map":{"version":3,"names":["classNames","React","useEffect","useState","withNativeProps","mergeProps","classPrefix","defaultProps","fullPage","WaterMark","p","props","_props$zIndex","zIndex","_props$gapX","gapX","_props$gapY","gapY","_props$width","width","_props$height","height","_props$rotate","rotate","image","_props$imageWidth","imageWidth","_props$imageHeight","imageHeight","content","_props$fontStyle","fontStyle","_props$fontWeight","fontWeight","_props$fontColor","fontColor","_props$fontSize","fontSize","_props$fontFamily","fontFamily","_useState","_useState2","_slicedToArray","base64Url","setBase64Url","canvas","document","createElement","ratio","window","devicePixelRatio","ctx","getContext","canvasWidth","concat","canvasHeight","markWidth","markHeight","setAttribute","translate","Math","PI","Number","img","Image","crossOrigin","referrerPolicy","onload","drawImage","restore","toDataURL","src","textBaseline","textAlign","markSize","font","fillStyle","Array","isArray","forEach","item","index","fillText","Error","className","_defineProperty","style","backgroundSize","backgroundImage"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/antd-mobile/es/components/water-mark/water-mark.js"],"sourcesContent":["import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nconst classPrefix = `adm-water-mark`;\nconst defaultProps = {\n  fullPage: true\n};\nexport const WaterMark = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    zIndex = 2000,\n    gapX = 24,\n    gapY = 48,\n    width = 120,\n    height = 64,\n    rotate = -22,\n    image,\n    imageWidth = 120,\n    imageHeight = 64,\n    content,\n    fontStyle = 'normal',\n    fontWeight = 'normal',\n    fontColor = 'rgba(0,0,0,.15)',\n    fontSize = 14,\n    fontFamily = 'sans-serif'\n  } = props;\n  const [base64Url, setBase64Url] = useState('');\n  useEffect(() => {\n    const canvas = document.createElement('canvas');\n    const ratio = window.devicePixelRatio;\n    const ctx = canvas.getContext('2d');\n    const canvasWidth = `${(gapX + width) * ratio}px`;\n    const canvasHeight = `${(gapY + height) * ratio}px`;\n    const markWidth = width * ratio;\n    const markHeight = height * ratio;\n    canvas.setAttribute('width', canvasWidth);\n    canvas.setAttribute('height', canvasHeight);\n    if (ctx) {\n      if (image) {\n        ctx.translate(markWidth / 2, markHeight / 2);\n        ctx.rotate(Math.PI / 180 * Number(rotate));\n        const img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.onload = () => {\n          ctx.drawImage(img, -imageWidth * ratio / 2, -imageHeight * ratio / 2, imageWidth * ratio, imageHeight * ratio);\n          ctx.restore();\n          setBase64Url(canvas.toDataURL());\n        };\n        img.src = image;\n      } else if (content) {\n        ctx.textBaseline = 'middle';\n        ctx.textAlign = 'center';\n        // 文字绕中间旋转\n        ctx.translate(markWidth / 2, markHeight / 2);\n        ctx.rotate(Math.PI / 180 * Number(rotate));\n        const markSize = Number(fontSize) * ratio;\n        ctx.font = `${fontStyle} normal ${fontWeight} ${markSize}px/${markHeight}px ${fontFamily}`;\n        ctx.fillStyle = fontColor;\n        if (Array.isArray(content)) {\n          content.forEach((item, index) => ctx.fillText(item, 0, index * markSize));\n        } else {\n          ctx.fillText(content, 0, 0);\n        }\n        ctx.restore();\n        setBase64Url(canvas.toDataURL());\n      }\n    } else {\n      throw new Error('Canvas is not supported in the current environment');\n    }\n  }, [gapX, gapY, rotate, fontStyle, fontWeight, width, height, fontFamily, fontColor, image, content, fontSize]);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, {\n      [`${classPrefix}-full-page`]: props.fullPage\n    }),\n    style: {\n      zIndex,\n      backgroundSize: `${gapX + width}px`,\n      backgroundImage: `url('${base64Url}')`\n    }\n  }));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}