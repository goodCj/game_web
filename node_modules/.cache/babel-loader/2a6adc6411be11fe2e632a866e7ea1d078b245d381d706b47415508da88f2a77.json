{"ast":null,"code":"import { useCallback, useEffect, useRef } from 'react';\nimport useLatest from '../useLatest';\nimport { isNumber } from '../utils';\nvar setRafInterval = function setRafInterval(callback) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (typeof requestAnimationFrame === typeof undefined) {\n    return {\n      id: setInterval(callback, delay)\n    };\n  }\n  var start = new Date().getTime();\n  var handle = {\n    id: 0\n  };\n  var loop = function loop() {\n    var current = new Date().getTime();\n    if (current - start >= delay) {\n      callback();\n      start = new Date().getTime();\n    }\n    handle.id = requestAnimationFrame(loop);\n  };\n  handle.id = requestAnimationFrame(loop);\n  return handle;\n};\nfunction cancelAnimationFrameIsNotDefined(t) {\n  return typeof cancelAnimationFrame === typeof undefined;\n}\nvar clearRafInterval = function clearRafInterval(handle) {\n  if (cancelAnimationFrameIsNotDefined(handle.id)) {\n    return clearInterval(handle.id);\n  }\n  cancelAnimationFrame(handle.id);\n};\nfunction useRafInterval(fn, delay, options) {\n  var immediate = options === null || options === void 0 ? void 0 : options.immediate;\n  var fnRef = useLatest(fn);\n  var timerRef = useRef();\n  useEffect(function () {\n    if (!isNumber(delay) || delay < 0) return;\n    if (immediate) {\n      fnRef.current();\n    }\n    timerRef.current = setRafInterval(function () {\n      fnRef.current();\n    }, delay);\n    return function () {\n      if (timerRef.current) {\n        clearRafInterval(timerRef.current);\n      }\n    };\n  }, [delay]);\n  var clear = useCallback(function () {\n    if (timerRef.current) {\n      clearRafInterval(timerRef.current);\n    }\n  }, []);\n  return clear;\n}\nexport default useRafInterval;","map":{"version":3,"names":["useCallback","useEffect","useRef","useLatest","isNumber","setRafInterval","callback","delay","arguments","length","undefined","requestAnimationFrame","id","setInterval","start","Date","getTime","handle","loop","current","cancelAnimationFrameIsNotDefined","t","cancelAnimationFrame","clearRafInterval","clearInterval","useRafInterval","fn","options","immediate","fnRef","timerRef","clear"],"sources":["/Users/liusu/Desktop/h5_free/game/node_modules/ahooks/es/useRafInterval/index.js"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport useLatest from '../useLatest';\nimport { isNumber } from '../utils';\nconst setRafInterval = function (callback, delay = 0) {\n  if (typeof requestAnimationFrame === typeof undefined) {\n    return {\n      id: setInterval(callback, delay)\n    };\n  }\n  let start = new Date().getTime();\n  const handle = {\n    id: 0\n  };\n  const loop = () => {\n    const current = new Date().getTime();\n    if (current - start >= delay) {\n      callback();\n      start = new Date().getTime();\n    }\n    handle.id = requestAnimationFrame(loop);\n  };\n  handle.id = requestAnimationFrame(loop);\n  return handle;\n};\nfunction cancelAnimationFrameIsNotDefined(t) {\n  return typeof cancelAnimationFrame === typeof undefined;\n}\nconst clearRafInterval = function (handle) {\n  if (cancelAnimationFrameIsNotDefined(handle.id)) {\n    return clearInterval(handle.id);\n  }\n  cancelAnimationFrame(handle.id);\n};\nfunction useRafInterval(fn, delay, options) {\n  const immediate = options === null || options === void 0 ? void 0 : options.immediate;\n  const fnRef = useLatest(fn);\n  const timerRef = useRef();\n  useEffect(() => {\n    if (!isNumber(delay) || delay < 0) return;\n    if (immediate) {\n      fnRef.current();\n    }\n    timerRef.current = setRafInterval(() => {\n      fnRef.current();\n    }, delay);\n    return () => {\n      if (timerRef.current) {\n        clearRafInterval(timerRef.current);\n      }\n    };\n  }, [delay]);\n  const clear = useCallback(() => {\n    if (timerRef.current) {\n      clearRafInterval(timerRef.current);\n    }\n  }, []);\n  return clear;\n}\nexport default useRafInterval;"],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACtD,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,QAAQ,QAAQ,UAAU;AACnC,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAaC,QAAQ,EAAa;EAAA,IAAXC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EAClD,IAAI,OAAOG,qBAAqB,KAAK,OAAOD,SAAS,EAAE;IACrD,OAAO;MACLE,EAAE,EAAEC,WAAW,CAACP,QAAQ,EAAEC,KAAK;IACjC,CAAC;EACH;EACA,IAAIO,KAAK,GAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE;EAChC,IAAMC,MAAM,GAAG;IACbL,EAAE,EAAE;EACN,CAAC;EACD,IAAMM,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS;IACjB,IAAMC,OAAO,GAAG,IAAIJ,IAAI,EAAE,CAACC,OAAO,EAAE;IACpC,IAAIG,OAAO,GAAGL,KAAK,IAAIP,KAAK,EAAE;MAC5BD,QAAQ,EAAE;MACVQ,KAAK,GAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE;IAC9B;IACAC,MAAM,CAACL,EAAE,GAAGD,qBAAqB,CAACO,IAAI,CAAC;EACzC,CAAC;EACDD,MAAM,CAACL,EAAE,GAAGD,qBAAqB,CAACO,IAAI,CAAC;EACvC,OAAOD,MAAM;AACf,CAAC;AACD,SAASG,gCAAgCA,CAACC,CAAC,EAAE;EAC3C,OAAO,OAAOC,oBAAoB,KAAK,OAAOZ,SAAS;AACzD;AACA,IAAMa,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAaN,MAAM,EAAE;EACzC,IAAIG,gCAAgC,CAACH,MAAM,CAACL,EAAE,CAAC,EAAE;IAC/C,OAAOY,aAAa,CAACP,MAAM,CAACL,EAAE,CAAC;EACjC;EACAU,oBAAoB,CAACL,MAAM,CAACL,EAAE,CAAC;AACjC,CAAC;AACD,SAASa,cAAcA,CAACC,EAAE,EAAEnB,KAAK,EAAEoB,OAAO,EAAE;EAC1C,IAAMC,SAAS,GAAGD,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACC,SAAS;EACrF,IAAMC,KAAK,GAAG1B,SAAS,CAACuB,EAAE,CAAC;EAC3B,IAAMI,QAAQ,GAAG5B,MAAM,EAAE;EACzBD,SAAS,CAAC,YAAM;IACd,IAAI,CAACG,QAAQ,CAACG,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EAAE;IACnC,IAAIqB,SAAS,EAAE;MACbC,KAAK,CAACV,OAAO,EAAE;IACjB;IACAW,QAAQ,CAACX,OAAO,GAAGd,cAAc,CAAC,YAAM;MACtCwB,KAAK,CAACV,OAAO,EAAE;IACjB,CAAC,EAAEZ,KAAK,CAAC;IACT,OAAO,YAAM;MACX,IAAIuB,QAAQ,CAACX,OAAO,EAAE;QACpBI,gBAAgB,CAACO,QAAQ,CAACX,OAAO,CAAC;MACpC;IACF,CAAC;EACH,CAAC,EAAE,CAACZ,KAAK,CAAC,CAAC;EACX,IAAMwB,KAAK,GAAG/B,WAAW,CAAC,YAAM;IAC9B,IAAI8B,QAAQ,CAACX,OAAO,EAAE;MACpBI,gBAAgB,CAACO,QAAQ,CAACX,OAAO,CAAC;IACpC;EACF,CAAC,EAAE,EAAE,CAAC;EACN,OAAOY,KAAK;AACd;AACA,eAAeN,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}